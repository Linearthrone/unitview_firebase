(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{2394:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>f});var t=s(5155),l=s(2115),i=s(9561),n=s(6104),r=s(8262),d=s(8856),o=s(1104),c=s(2667),u=s(4903),m=s(5813);function x(){return(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(d.E,{className:"h-8 w-48 mb-2"}),(0,t.jsx)(d.E,{className:"h-4 w-96"})]}),(0,t.jsx)(d.E,{className:"h-10 w-full max-w-xs mb-6"}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-[50vh]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-600 border-blue-200 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})})]})}function f(){let[e,a]=(0,l.useState)([]),[s,d]=(0,l.useState)(null),[f,p]=(0,l.useState)([]),[h,g]=(0,l.useState)(null),[j,b]=(0,l.useState)(!0),[N,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[E,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{b(!0);let e=await (0,n.WL)();a(e)}catch(e){console.error("Error loading facilities:",e),(0,r.oR)({title:"Error",description:"Failed to load facilities. Please try again.",variant:"destructive"})}finally{b(!1)}})()},[]),(0,l.useEffect)(()=>{s&&y&&(async()=>{try{b(!0);let e=await (0,n.YU)(s.id);p(e),e.length>0?g(e[0]):g(null)}catch(e){console.error("Error loading units for ".concat(s.name,":"),e),(0,r.oR)({title:"Error",description:"Failed to load units for ".concat(s.name,"."),variant:"destructive"})}finally{b(!1)}})()},[s,y]);let k=e=>{(null==s?void 0:s.id)===e.id&&y||(S(e),v(!0))},C=async e=>{try{return await (0,u.x9)(m.j2,e.email,e.password),(0,r.oR)({title:"Login Successful",description:"Viewing units for ".concat(null==E?void 0:E.name)}),d(E),w(!0),v(!1),!0}catch(e){return console.error("Login failed:",e),(0,r.oR)({title:"Login Failed",description:"Invalid credentials. Please try again.",variant:"destructive"}),!1}};return j&&0===e.length?(0,t.jsx)(x,{}):y&&s?(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-1",children:["UnitView: ",s.name]}),(0,t.jsx)(Button,{variant:"link",className:"p-0 h-auto",onClick:()=>{w(!1),d(null),p([]),g(null)},children:"Switch Facility"})]}),f.length>0&&(0,t.jsxs)("div",{className:"w-full max-w-xs",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1 sr-only",children:"Select Unit"}),(0,t.jsx)("select",{className:"border rounded-md p-2 w-full",value:(null==h?void 0:h.id)||"",onChange:e=>{let a=f.find(a=>a.id===e.target.value);a&&g(a)},children:f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.designation},e.id))})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:"p-8 flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-t-blue-600 border-blue-200 rounded-full animate-spin"})}),children:h?(0,t.jsx)(i.I,{unitId:h.id}):(0,t.jsx)("div",{className:"p-8 text-center h-64 flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:j?"Loading units...":"No units found for ".concat(s.name,". Please create one in Facility Setup.")})})})})]}):(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Select a Facility to View Units"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.length>0?e.map(e=>(0,t.jsxs)("div",{onClick:()=>k(e),className:"border rounded-lg p-6 flex flex-col items-center justify-center text-center cursor-pointer hover:bg-gray-50 hover:shadow-md transition-all",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 mb-4 text-gray-500"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e.name})]},e.id)):(0,t.jsx)("p",{className:"text-gray-500 col-span-full text-center",children:"No facilities found. Please create one in Facility Setup."})}),(0,t.jsx)(c.E,{open:N,onOpenChange:v,onLogin:C})]})}},2667:(e,a,s)=>{"use strict";s.d(a,{E:()=>m});var t=s(5155),l=s(2115),i=s(285),n=s(4165),r=s(9434);let d=l.forwardRef((e,a)=>{let{className:s,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});d.displayName="Input";var o=s(968);let c=(0,s(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(o.b,{ref:a,className:(0,r.cn)(c(),s),...l})});function m(e){let{open:a,onOpenChange:s,onLogin:r}=e,[o,c]=(0,l.useState)("admin@unitview.com"),[m,x]=(0,l.useState)("password"),[f,p]=(0,l.useState)(!1),[h,g]=(0,l.useState)(""),j=async()=>{p(!0),g("");let e=await r({email:o,password:m});p(!1),e||g("Invalid credentials. Please try again.")};return(0,t.jsx)(n.lG,{open:a,onOpenChange:s,children:(0,t.jsxs)(n.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(n.c7,{children:[(0,t.jsx)(n.L3,{children:"Authorization Required"}),(0,t.jsx)(n.rr,{children:"Please log in to access this facility's information."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"email",children:"Email"}),(0,t.jsx)(d,{id:"email",type:"email",placeholder:"admin@unitview.com",value:o,onChange:e=>c(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{htmlFor:"password",children:"Password"}),(0,t.jsx)(d,{id:"password",type:"password",placeholder:"password",value:m,onChange:e=>x(e.target.value)})]}),h&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:h}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"For demo purposes, use email: admin@unitview.com and password: password"})]}),(0,t.jsxs)(n.Es,{children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:f,children:"Cancel"}),(0,t.jsx)(i.$,{type:"submit",onClick:j,disabled:f,children:f?"Logging In...":"Login"})]})]})})}u.displayName=o.b.displayName},4165:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>u,Es:()=>x,L3:()=>f,c7:()=>m,lG:()=>d,rr:()=>p});var t=s(5155),l=s(2115),i=s(7234),n=s(5318),r=s(9434);let d=i.bL;i.l9;let o=i.ZL;i.bm;let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(i.hJ,{ref:a,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});c.displayName=i.hJ.displayName;let u=l.forwardRef((e,a)=>{let{className:s,children:l,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(i.UC,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[l,(0,t.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.UC.displayName;let m=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};m.displayName="DialogHeader";let x=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};x.displayName="DialogFooter";let f=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(i.hE,{ref:a,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});f.displayName=i.hE.displayName;let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(i.VY,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});p.displayName=i.VY.displayName},5605:(e,a,s)=>{Promise.resolve().then(s.bind(s,2394))},8856:(e,a,s)=>{"use strict";s.d(a,{E:()=>i});var t=s(5155),l=s(9434);function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-gray-200",a),...s})}}},e=>{var a=a=>e(e.s=a);e.O(0,[135,210,3,377,908,286,56,441,684,358],()=>a(5605)),_N_E=e.O()}]);