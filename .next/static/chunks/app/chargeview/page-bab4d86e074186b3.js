(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{2492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(5155),l=s(2115),a=s(5382),r=s(285),d=s(6104),n=s(8262);function c(){let[e,t]=(0,l.useState)([]),[s,c]=(0,l.useState)(null),[o,x]=(0,l.useState)(!0),[h,m]=(0,l.useState)({totalBeds:0,occupiedBeds:0,availableBeds:0,pendingAdmissions:0,pendingDischarges:0,highAcuityPatients:0});return((0,l.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,d.YU)();t(e),e.length>0&&!s&&c(e[0])}catch(e){console.error("Error loading units:",e),(0,n.oR)({title:"Error",description:"Failed to load units. Please try again.",variant:"destructive"})}finally{x(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{if(s)try{let e=await (0,d.QC)(s.id),t=s.roomCount,i=e.filter(e=>e.assigned).length,l=Math.floor(3*Math.random()),a=Math.floor(4*Math.random()),r=e.filter(e=>e.acuity>=4).length;m({totalBeds:t,occupiedBeds:i,availableBeds:t-i,pendingAdmissions:l,pendingDischarges:a,highAcuityPatients:r})}catch(e){console.error("Error loading unit metrics:",e),(0,n.oR)({title:"Error",description:"Failed to load unit metrics",variant:"destructive"})}})()},[s]),o)?(0,i.jsx)("div",{className:"container mx-auto p-6 flex items-center justify-center h-[50vh]",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-600 border-blue-200 rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Loading units..."})]})}):0===e.length?(0,i.jsx)("div",{className:"container mx-auto p-6",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"ChargeView"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"No units have been created yet. Please go to Facility Setup to create a unit."}),(0,i.jsx)("a",{href:"/facility-setup",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Go to Facility Setup"})]})}):(0,i.jsxs)("div",{className:"container mx-auto p-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"ChargeView"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Comprehensive view for charge nurses to manage unit operations."})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Unit"}),(0,i.jsx)("select",{className:"border rounded-md p-2 w-full max-w-xs",value:(null==s?void 0:s.id)||"",onChange:t=>{let s=e.find(e=>e.id===t.target.value);s&&c(s)},children:e.map(e=>(0,i.jsx)("option",{value:e.id,children:e.designation},e.id))})]}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:[s.designation," Metrics"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:h.totalBeds}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Total Beds"})]}),(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-700",children:h.occupiedBeds}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Occupied"})]}),(0,i.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:h.availableBeds}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Available"})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-yellow-700",children:h.pendingAdmissions}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Admits"})]}),(0,i.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-indigo-700",children:h.pendingDischarges}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Discharges"})]}),(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-red-700",children:h.highAcuityPatients}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"High Acuity"})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,i.jsx)(r.$,{children:"Assign Patients"}),(0,i.jsx)(r.$,{variant:"outline",children:"Print Assignments"}),(0,i.jsx)(r.$,{variant:"outline",children:"Generate Report"}),(0,i.jsx)(r.$,{variant:"outline",children:"Staff Directory"})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,i.jsx)(a.I,{unitId:s.id})})]})]})}},2611:(e,t,s)=>{Promise.resolve().then(s.bind(s,2492))}},e=>{var t=t=>e(e.s=t);e.O(0,[135,210,3,377,382,441,684,358],()=>t(2611)),_N_E=e.O()}]);