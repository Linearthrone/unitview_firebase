(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{4201:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),r=s(2115),n=s(285);function l(e){let{open:t,onClose:s,onCreateUnit:l}=e,[i,d]=(0,r.useState)({designation:"",roomCount:0,roomRanges:[""],nurseCardCount:2,pctCardCount:1,hasChargeNurse:!0,hasUnitClerk:!0}),[o,c]=(0,r.useState)({}),m=()=>{let e={};return i.designation.trim()||(e.designation="Unit designation is required"),i.roomCount<=0&&(e.roomCount="Number of rooms must be greater than 0"),0!==i.roomRanges.length&&i.roomRanges[0]?i.roomRanges.filter(e=>{if(!e)return!0;let t=e.split("-");if(2!==t.length)return!0;let[s,a]=t.map(e=>parseInt(e.trim(),10));return isNaN(s)||isNaN(a)||s>=a}).length>0&&(e.roomRanges='Room ranges must be in format "start-end" (e.g., 401-412)'):e.roomRanges="At least one room range is required",i.nurseCardCount<=0&&(e.nurseCardCount="Number of nurse cards must be greater than 0"),i.pctCardCount<0&&(e.pctCardCount="Number of PCT cards cannot be negative"),c(e),0===Object.keys(e).length},u=e=>{let{name:t,value:s,type:a}=e.target;if("checkbox"===a){let{checked:s}=e.target;d({...i,[t]:s})}else"roomRanges"===t?d({...i,roomRanges:s.split(",").map(e=>e.trim()).filter(Boolean)}):"roomCount"===t||"nurseCardCount"===t||"pctCardCount"===t?d({...i,[t]:parseInt(s,10)||0}):d({...i,[t]:s});o[t]&&c({...o,[t]:""})};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create New Unit"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()&&(l(i),d({designation:"",roomCount:0,roomRanges:[""],nurseCardCount:2,pctCardCount:1,hasChargeNurse:!0,hasUnitClerk:!0}),c({}))},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Unit Designation"}),(0,a.jsx)("input",{type:"text",name:"designation",value:i.designation,onChange:u,className:"w-full p-2 border rounded ".concat(o.designation?"border-red-500":""),placeholder:"e.g., 4 West"}),o.designation&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.designation})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Number of Patient Rooms"}),(0,a.jsx)("input",{type:"number",name:"roomCount",value:i.roomCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.roomCount?"border-red-500":""),min:"1"}),o.roomCount&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.roomCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Room Number Range(s)"}),(0,a.jsx)("input",{type:"text",name:"roomRanges",value:i.roomRanges.join(", "),onChange:u,className:"w-full p-2 border rounded ".concat(o.roomRanges?"border-red-500":""),placeholder:"e.g., 401-412, 450-455"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter ranges separated by commas (e.g., 401-412, 450-455)"}),o.roomRanges&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.roomRanges})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Standard Number of Nurse Cards"}),(0,a.jsx)("input",{type:"number",name:"nurseCardCount",value:i.nurseCardCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.nurseCardCount?"border-red-500":""),min:"1"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"1x3 cards with nurse name, spectra number, relief nurse, and patient assignments"}),o.nurseCardCount&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.nurseCardCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Number of PCT Cards"}),(0,a.jsx)("input",{type:"number",name:"pctCardCount",value:i.pctCardCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.pctCardCount?"border-red-500":""),min:"0"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"2x2 cards for patient care techs with name, spectra number, relief tech, and room assignments"}),o.pctCardCount&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.pctCardCount})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"hasChargeNurse",checked:i.hasChargeNurse,onChange:u,className:"mr-2",id:"hasChargeNurse"}),(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"hasChargeNurse",children:"Include Charge Nurse Card (2x1)"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"hasUnitClerk",checked:i.hasUnitClerk,onChange:u,className:"mr-2",id:"hasUnitClerk"}),(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:"hasUnitClerk",children:"Include Unit Clerk Card (2x1)"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)(n.$,{variant:"outline",type:"button",onClick:s,children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",children:"Create Unit"})]})]})]})}):null}var i=s(8611),d=s(9434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.bL,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(i.zi,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function c(e){let{module:t,onToggle:s}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(t.enabled?"border-blue-500 bg-blue-50":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-lg",children:t.name}),(0,a.jsx)(o,{checked:t.enabled,onCheckedChange:s,className:"data-[state=checked]:bg-blue-600"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.description}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(t.enabled?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:t.enabled?"Enabled":"Disabled"})})]})}o.displayName=i.bL.displayName;var m=s(5382);function u(e){let{unit:t,isSelected:s,onSelect:r}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all ".concat(s?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),onClick:r,children:[(0,a.jsx)("h3",{className:"font-medium text-lg",children:t.designation}),(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Rooms: ",t.roomCount]}),(0,a.jsxs)("p",{children:["Room Range: ",t.roomRanges.join(", ")]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:[t.nurseCardCount," Nurse Cards"]}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:[t.pctCardCount," PCT Cards"]}),t.hasChargeNurse&&(0,a.jsx)("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:"Charge Nurse"}),t.hasUnitClerk&&(0,a.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Unit Clerk"})]})]}),s&&(0,a.jsx)("div",{className:"mt-3 text-blue-600 text-sm font-medium",children:"Currently Selected"}),t.createdAt&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]})}var x=s(6104),h=s(8262);function g(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[d,o]=(0,r.useState)(!1),[g,b]=(0,r.useState)(null),[p,C]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{C(!0),await (0,x.WM)();let e=await (0,x.YU)();t(e),e.length>0&&!g&&b(e[0]);let s=await (0,x.eI)();i(s)}catch(e){console.error("Error loading data:",e),(0,h.oR)({title:"Error",description:"Failed to load data. Please try again.",variant:"destructive"})}finally{C(!1)}})()},[]);let N=async s=>{try{let a=await (0,x.Dq)(s);t([...e,a]),b(a),o(!1),(0,h.oR)({title:"Success",description:'Unit "'.concat(a.designation,'" has been created.')})}catch(e){console.error("Error creating unit:",e),(0,h.oR)({title:"Error",description:"Failed to create unit. Please try again.",variant:"destructive"})}},j=async e=>{try{let t=s.find(t=>t.id===e);if(!t)return;await (0,x.YB)(e,!t.enabled),i(s.map(t=>t.id===e?{...t,enabled:!t.enabled}:t)),(0,h.oR)({title:"Module Updated",description:"".concat(t.name," has been ").concat(t.enabled?"disabled":"enabled",".")})}catch(e){console.error("Error toggling module:",e),(0,h.oR)({title:"Error",description:"Failed to update module. Please try again.",variant:"destructive"})}},f=e=>{b(e)};return p?(0,a.jsx)("div",{className:"container mx-auto p-6 flex items-center justify-center h-[50vh]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-600 border-blue-200 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Facility Setup"}),(0,a.jsx)(n.$,{onClick:()=>o(!0),children:"Create New Unit"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Units"}),e.length>0?e.map(e=>(0,a.jsx)(u,{unit:e,isSelected:(null==g?void 0:g.id)===e.id,onSelect:()=>f(e)},e.id)):(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-6 text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No units have been created yet."}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>o(!0),children:"Create Your First Unit"})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:g?"".concat(g.designation," Layout"):"Select a Unit"}),g?(0,a.jsx)(m.I,{unitId:g.id}):(0,a.jsx)("div",{className:"bg-gray-50 border rounded-lg p-12 text-center",children:(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"Select a unit from the sidebar or create a new unit to view the layout."})})]})]}),(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Module Configuration"}),s.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,a.jsx)(c,{module:e,onToggle:()=>j(e.id)},e.id))}):(0,a.jsx)("div",{className:"bg-gray-50 border rounded-lg p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No modules available."})})]}),(0,a.jsx)(l,{open:d,onClose:()=>o(!1),onCreateUnit:N})]})}},7678:(e,t,s)=>{Promise.resolve().then(s.bind(s,4201))}},e=>{var t=t=>e(e.s=t);e.O(0,[135,210,3,377,611,382,441,684,358],()=>t(7678)),_N_E=e.O()}]);