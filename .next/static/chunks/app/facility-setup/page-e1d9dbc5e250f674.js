(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{4201:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(5155),n=t(2115),r=t(285);function i(e){let{open:a,onClose:t,onCreateUnit:i}=e,[l,d]=(0,n.useState)({designation:"",roomCount:0,roomRanges:[""],nurseCardCount:2,pctCardCount:1,hasChargeNurse:!0,hasUnitClerk:!0}),[o,c]=(0,n.useState)({}),m=()=>{let e={};return l.designation.trim()||(e.designation="Unit designation is required"),l.roomCount<=0&&(e.roomCount="Number of rooms must be greater than 0"),0!==l.roomRanges.length&&l.roomRanges[0]?l.roomRanges.filter(e=>{if(!e)return!0;let a=e.split("-");if(2!==a.length)return!0;let[t,s]=a.map(e=>parseInt(e.trim(),10));return isNaN(t)||isNaN(s)||t>=s}).length>0&&(e.roomRanges='Room ranges must be in format "start-end" (e.g., 401-412)'):e.roomRanges="At least one room range is required",l.nurseCardCount<=0&&(e.nurseCardCount="Number of nurse cards must be greater than 0"),l.pctCardCount<0&&(e.pctCardCount="Number of PCT cards cannot be negative"),c(e),0===Object.keys(e).length},u=e=>{let{name:a,value:t,type:s}=e.target;if("checkbox"===s){let{checked:t}=e.target;d({...l,[a]:t})}else"roomRanges"===a?d({...l,roomRanges:t.split(",").map(e=>e.trim()).filter(Boolean)}):"roomCount"===a||"nurseCardCount"===a||"pctCardCount"===a?d({...l,[a]:parseInt(t,10)||0}):d({...l,[a]:t});o[a]&&c({...o,[a]:""})};return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create New Unit"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()&&(i(l),d({designation:"",roomCount:0,roomRanges:[""],nurseCardCount:2,pctCardCount:1,hasChargeNurse:!0,hasUnitClerk:!0}),c({}))},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Unit Designation"}),(0,s.jsx)("input",{type:"text",name:"designation",value:l.designation,onChange:u,className:"w-full p-2 border rounded ".concat(o.designation?"border-red-500":""),placeholder:"e.g., 4 West"}),o.designation&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.designation})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Number of Patient Rooms"}),(0,s.jsx)("input",{type:"number",name:"roomCount",value:l.roomCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.roomCount?"border-red-500":""),min:"1"}),o.roomCount&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.roomCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Room Number Range(s)"}),(0,s.jsx)("input",{type:"text",name:"roomRanges",value:l.roomRanges.join(", "),onChange:u,className:"w-full p-2 border rounded ".concat(o.roomRanges?"border-red-500":""),placeholder:"e.g., 401-412, 450-455"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter ranges separated by commas (e.g., 401-412, 450-455)"}),o.roomRanges&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.roomRanges})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Standard Number of Nurse Cards"}),(0,s.jsx)("input",{type:"number",name:"nurseCardCount",value:l.nurseCardCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.nurseCardCount?"border-red-500":""),min:"1"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"1x3 cards with nurse name, spectra number, relief nurse, and patient assignments"}),o.nurseCardCount&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.nurseCardCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Number of PCT Cards"}),(0,s.jsx)("input",{type:"number",name:"pctCardCount",value:l.pctCardCount,onChange:u,className:"w-full p-2 border rounded ".concat(o.pctCardCount?"border-red-500":""),min:"0"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"2x2 cards for patient care techs with name, spectra number, relief tech, and room assignments"}),o.pctCardCount&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.pctCardCount})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"hasChargeNurse",checked:l.hasChargeNurse,onChange:u,className:"mr-2",id:"hasChargeNurse"}),(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"hasChargeNurse",children:"Include Charge Nurse Card (2x1)"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"hasUnitClerk",checked:l.hasUnitClerk,onChange:u,className:"mr-2",id:"hasUnitClerk"}),(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"hasUnitClerk",children:"Include Unit Clerk Card (2x1)"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)(r.$,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),(0,s.jsx)(r.$,{type:"submit",children:"Create Unit"})]})]})]})}):null}var l=t(8611),d=t(9434);let o=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.bL,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:a,children:(0,s.jsx)(l.zi,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function c(e){let{module:a,onToggle:t}=e;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 ".concat(a.enabled?"border-blue-500 bg-blue-50":"border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-medium text-lg",children:a.name}),(0,s.jsx)(o,{checked:a.enabled,onCheckedChange:t,className:"data-[state=checked]:bg-blue-600"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:a.description}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(a.enabled?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:a.enabled?"Enabled":"Disabled"})})]})}o.displayName=l.bL.displayName;var m=t(5382);function u(e){let{unit:a,isSelected:t,onSelect:n}=e;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all ".concat(t?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),onClick:n,children:[(0,s.jsx)("h3",{className:"font-medium text-lg",children:a.designation}),(0,s.jsxs)("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:["Rooms: ",a.roomCount]}),(0,s.jsxs)("p",{children:["Room Range: ",a.roomRanges.join(", ")]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,s.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:[a.nurseCardCount," Nurse Cards"]}),(0,s.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:[a.pctCardCount," PCT Cards"]}),a.hasChargeNurse&&(0,s.jsx)("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:"Charge Nurse"}),a.hasUnitClerk&&(0,s.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Unit Clerk"})]})]}),t&&(0,s.jsx)("div",{className:"mt-3 text-blue-600 text-sm font-medium",children:"Currently Selected"}),a.createdAt&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Created: ",new Date(a.createdAt).toLocaleDateString()]})]})}var x=t(7548),g=t(8262),h=t(8856);function b(){let[e,a]=(0,n.useState)([]),[t,l]=(0,n.useState)([]),[d,o]=(0,n.useState)(!1),[b,p]=(0,n.useState)(null),[f,N]=(0,n.useState)(!0),[C,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{N(!0),await (0,x.WM)();let[e,t]=await Promise.all([(0,x.YU)(),(0,x.eI)()]);console.log("Loaded units:",e),a(e),l(t),e.length>0&&!b&&p(e[0])}catch(e){console.error("Error loading data:",e),(0,g.oR)({title:"Error",description:"Failed to load data. Please try again.",variant:"destructive"})}finally{N(!1)}})()},[]);let v=async e=>{try{j(!0),(0,g.oR)({title:"Creating Unit",description:"Please wait while we set up your unit..."}),console.log("Creating unit with data:",e);let t=await (0,x.Dq)(e);console.log("Created unit:",t),a(e=>[...e,t]),p(t),o(!1),(0,g.oR)({title:"Success",description:'Unit "'.concat(t.designation,'" has been created.')});let s=await (0,x.YU)();console.log("Reloaded units:",s),a(s)}catch(e){console.error("Error creating unit:",e),(0,g.oR)({title:"Error",description:"Failed to create unit. Please try again.",variant:"destructive"})}finally{j(!1)}},y=async e=>{try{let a=t.find(a=>a.id===e);if(!a)return;l(t.map(a=>a.id===e?{...a,enabled:!a.enabled}:a)),await (0,x.YB)(e,!a.enabled),(0,g.oR)({title:"Module Updated",description:"".concat(a.name," has been ").concat(a.enabled?"disabled":"enabled",".")})}catch(e){console.error("Error toggling module:",e),l(e=>[...e]),(0,g.oR)({title:"Error",description:"Failed to update module. Please try again.",variant:"destructive"})}},w=e=>{p(e)};return f?(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)(h.E,{className:"h-10 w-48"}),(0,s.jsx)(h.E,{className:"h-10 w-32"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(h.E,{className:"h-8 w-24 mb-4"}),[1,2,3].map(e=>(0,s.jsx)(h.E,{className:"h-24 w-full rounded-lg"},e))]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)(h.E,{className:"h-8 w-48 mb-4"}),(0,s.jsx)(h.E,{className:"h-64 w-full rounded-lg"})]})]})]}):(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Facility Setup"}),(0,s.jsx)(r.$,{onClick:()=>o(!0),disabled:C,children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"Creating..."}),(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"})]}):"Create New Unit"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Units"}),e.length>0?e.map(e=>(0,s.jsx)(u,{unit:e,isSelected:(null==b?void 0:b.id)===e.id,onSelect:()=>w(e)},e.id)):(0,s.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"No units have been created yet."}),(0,s.jsx)(r.$,{variant:"outline",onClick:()=>o(!0),disabled:C,children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"Creating..."}),(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-t-transparent border-current rounded-full animate-spin"})]}):"Create Your First Unit"})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:b?"".concat(b.designation," Layout"):"Select a Unit"}),b?(0,s.jsx)(m.I,{unitId:b.id}):(0,s.jsx)("div",{className:"bg-gray-50 border rounded-lg p-12 text-center",children:(0,s.jsx)("p",{className:"text-gray-500 mb-2",children:"Select a unit from the sidebar or create a new unit to view the layout."})})]})]}),(0,s.jsxs)("div",{className:"mt-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Module Configuration"}),t.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,s.jsx)(c,{module:e,onToggle:()=>y(e.id)},e.id))}):(0,s.jsx)("div",{className:"bg-gray-50 border rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No modules available."})})]}),(0,s.jsx)(i,{open:d,onClose:()=>o(!1),onCreateUnit:v})]})}},7548:(e,a,t)=>{"use strict";t.d(a,{Dq:()=>h,WM:()=>C,YB:()=>f,YU:()=>b,eI:()=>p});var s=t(3915),n=t(5317),r=t(7505),i=t(4903);let l=0===(0,s.Dk)().length?(0,s.Wp)({apiKey:"AIzaSyARvbAJtv-NBJnJQ3EdZNU3WsMnXThFzhM",authDomain:"unitview.firebaseapp.com",databaseURL:"https://unitview-default-rtdb.firebaseio.com",projectId:"unitview",storageBucket:"unitview.firebasestorage.app",messagingSenderId:"185648925766",appId:"1:185648925766:web:5ae6271dd4977f6e158e47"}):(0,s.Dk)()[0],d=(0,n.aU)(l);(0,r.c7)(l),(0,i.xI)(l);let o=(0,n.rJ)(d,"units"),c=(0,n.rJ)(d,"patients"),m=(0,n.rJ)(d,"nurses"),u=(0,n.rJ)(d,"pcts"),x=(0,n.rJ)(d,"staff"),g=(0,n.rJ)(d,"modules");async function h(e){let a=Date.now(),t=(0,n.H9)(o),s={...e,id:t.id,createdAt:a,updatedAt:a};return await (0,n.BN)(t,s),s}async function b(){return(await (0,n.GG)(o)).docs.map(e=>e.data())}async function p(){return(await (0,n.GG)(g)).docs.map(e=>e.data())}async function f(e,a){let t=(0,n.H9)(g,e);await (0,n.mZ)(t,{enabled:a,updatedAt:Date.now()})}async function N(e){let a=Date.now(),t=(0,n.wP)(d);for(let s of e){let e=(0,n.H9)(g,s.id);(await (0,n.x7)(e)).exists()||t.set(e,{...s,updatedAt:a})}await t.commit()}async function C(){await N([{id:"mock-patient",name:"Mock Patient Data",description:"Generate mock patient data for testing",enabled:!0},{id:"spectra-pool",name:"Spectra Pool Management",description:"Manage spectra pool assignments",enabled:!1},{id:"acuity-tracking",name:"Acuity Tracking",description:"Track and manage patient acuity levels",enabled:!0},{id:"bed-management",name:"Bed Management",description:"Track bed availability and assignments",enabled:!0},{id:"staff-messaging",name:"Staff Messaging",description:"Internal messaging system for staff",enabled:!1}])}},8856:(e,a,t)=>{"use strict";t.d(a,{E:()=>r});var s=t(5155),n=t(9434);function r(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-gray-200",a),...t})}},9467:(e,a,t)=>{Promise.resolve().then(t.bind(t,4201))}},e=>{var a=a=>e(e.s=a);e.O(0,[135,210,3,377,611,382,441,684,358],()=>a(9467)),_N_E=e.O()}]);