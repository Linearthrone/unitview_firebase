"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{285:(e,t,a)=>{a.d(t,{$:()=>d});var s=a(5155),n=a(2115),r=a(2085),i=a(9434);let l=(0,r.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:d=!1,...c}=e;return(0,s.jsx)("button",{className:(0,i.cn)(l({variant:n,size:r}),a),ref:t,...c})});d.displayName="Button"},2047:(e,t,a)=>{a.d(t,{v:()=>n});var s=a(5155);function n(e){let{title:t,staffMember:a,onUpdate:n,editMode:r,size:i="normal"}=e;return(0,s.jsxs)("div",{className:"border ".concat("Charge Nurse"===t?"border-purple-200":"border-yellow-200"," rounded-lg p-4 ").concat("small"===i?"col-span-1":"col-span-1 md:col-span-2"),children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:t}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),r?(0,s.jsx)("input",{type:"text",value:a.name,onChange:e=>{n({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"font-medium",children:a.name||"Unassigned"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),r?(0,s.jsx)("input",{type:"text",value:a.spectraNumber,onChange:e=>{n({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"text-sm",children:a.spectraNumber||"N/A"})]})]}),"chargeNurse"===a.role&&(0,s.jsx)("div",{className:"mt-3 pt-2 border-t border-purple-100",children:(0,s.jsx)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Unit Supervisor"})})]})}},2732:(e,t,a)=>{a.d(t,{B5:()=>T,Dq:()=>h,Dr:()=>k,HW:()=>G,WM:()=>H,YB:()=>_,YU:()=>b,Z6:()=>j,ZW:()=>O,cT:()=>w,e4:()=>R,eI:()=>P});var s=a(3915),n=a(5317),r=a(7505),i=a(4903);let l=0===(0,s.Dk)().length?(0,s.Wp)({apiKey:"AIzaSyARvbAJtv-NBJnJQ3EdZNU3WsMnXThFzhM",authDomain:"unitview.firebaseapp.com",databaseURL:"https://unitview-default-rtdb.firebaseio.com",projectId:"unitview",storageBucket:"unitview.firebasestorage.app",messagingSenderId:"185648925766",appId:"1:185648925766:web:5ae6271dd4977f6e158e47"}):(0,s.Dk)()[0],d=(0,n._A)(l,{localCache:(0,n.vK)({cacheSizeBytes:n.H6,tabManager:(0,n.cY)()})});try{(0,n.ol)(d).catch(e=>{console.error("Firestore persistence error:",e)})}catch(e){console.warn("Firestore persistence already enabled or not supported")}(0,r.c7)(l),(0,i.xI)(l);let c=(0,n.rJ)(d,"units"),o=(0,n.rJ)(d,"patients"),u=(0,n.rJ)(d,"nurses"),m=(0,n.rJ)(d,"pcts"),p=(0,n.rJ)(d,"staff"),x=(0,n.rJ)(d,"modules"),f=null,g=new Map;async function h(e){let t=Date.now(),a=(0,n.H9)(c),s={...e,id:a.id,createdAt:t,updatedAt:t};return await (0,n.BN)(a,s),f&&f.push(s),s}async function b(){if(f)return f;let e=(await (0,n.GG)(c)).docs.map(e=>e.data());return f=e,e}async function N(e){let t=g.get(e);if(null==t?void 0:t.unit)return t.unit;let a=(0,n.H9)(c,e),s=await (0,n.x7)(a);if(s.exists()){let t=s.data();return g.has(e)?g.get(e).unit=t:g.set(e,{unit:t,patients:[],nurses:[],pcts:[],chargeNurse:null,unitClerk:null}),t}return null}async function y(e){let t=Date.now(),a=(0,n.wP)(d),s=[];for(let r of e){let e=(0,n.H9)(o),i={...r,id:e.id,createdAt:t,updatedAt:t};a.set(e,i),s.push(i),g.has(r.unitId)&&g.get(r.unitId).patients.push(i)}return await a.commit(),s}async function v(e){let t=g.get(e);if((null==t?void 0:t.patients.length)>0)return t.patients;let a=(0,n.P)(o,(0,n._M)("unitId","==",e)),s=(await (0,n.GG)(a)).docs.map(e=>e.data());return g.has(e)?g.get(e).patients=s:g.set(e,{unit:null,patients:s,nurses:[],pcts:[],chargeNurse:null,unitClerk:null}),s}async function j(e,t){let a=(0,n.H9)(o,e),s={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(a,s),g.entries())){let t=r.patients.findIndex(t=>t.id===e);if(-1!==t){r.patients[t]={...r.patients[t],...s};break}}}async function w(e){let t=(0,n.wP)(d),a=Date.now();for(let{id:s,data:r}of e){let e=(0,n.H9)(o,s);for(let[n,i]of(t.update(e,{...r,updatedAt:a}),g.entries())){let e=i.patients.findIndex(e=>e.id===s);if(-1!==e){i.patients[e]={...i.patients[e],...r,updatedAt:a};break}}}await t.commit()}async function A(e){let t=Date.now(),a=(0,n.wP)(d),s=[];for(let r of e){let e=(0,n.H9)(u),i={...r,id:e.id,createdAt:t,updatedAt:t};a.set(e,i),s.push(i),g.has(r.unitId)&&g.get(r.unitId).nurses.push(i)}return await a.commit(),s}async function C(e){let t=g.get(e);if((null==t?void 0:t.nurses.length)>0)return t.nurses;let a=(0,n.P)(u,(0,n._M)("unitId","==",e)),s=(await (0,n.GG)(a)).docs.map(e=>e.data());return g.has(e)?g.get(e).nurses=s:g.set(e,{unit:null,patients:[],nurses:s,pcts:[],chargeNurse:null,unitClerk:null}),s}async function k(e,t){let a=(0,n.H9)(u,e),s={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(a,s),g.entries())){let t=r.nurses.findIndex(t=>t.id===e);if(-1!==t){r.nurses[t]={...r.nurses[t],...s};break}}}async function I(e){let t=Date.now(),a=(0,n.wP)(d),s=[];for(let r of e){let e=(0,n.H9)(m),i={...r,id:e.id,createdAt:t,updatedAt:t};a.set(e,i),s.push(i),g.has(r.unitId)&&g.get(r.unitId).pcts.push(i)}return await a.commit(),s}async function S(e){let t=g.get(e);if((null==t?void 0:t.pcts.length)>0)return t.pcts;let a=(0,n.P)(m,(0,n._M)("unitId","==",e)),s=(await (0,n.GG)(a)).docs.map(e=>e.data());return g.has(e)?g.get(e).pcts=s:g.set(e,{unit:null,patients:[],nurses:[],pcts:s,chargeNurse:null,unitClerk:null}),s}async function T(e,t){let a=(0,n.H9)(m,e),s={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(a,s),g.entries())){let t=r.pcts.findIndex(t=>t.id===e);if(-1!==t){r.pcts[t]={...r.pcts[t],...s};break}}}async function D(e){let t=Date.now(),a=(0,n.wP)(d),s=[];for(let r of e){let e=(0,n.H9)(p),i={...r,id:e.id,createdAt:t,updatedAt:t};a.set(e,i),s.push(i),g.has(r.unitId)&&("chargeNurse"===r.role?g.get(r.unitId).chargeNurse=i:"unitClerk"===r.role&&(g.get(r.unitId).unitClerk=i))}return await a.commit(),s}async function M(e){let t=(0,n.P)(p,(0,n._M)("unitId","==",e));return(await (0,n.GG)(t)).docs.map(e=>e.data())}async function R(e,t){let a=(0,n.H9)(p,e),s={...t,updatedAt:Date.now()};for(let[t,l]of(await (0,n.mZ)(a,s),g.entries())){var r,i;(null==(r=l.chargeNurse)?void 0:r.id)===e?l.chargeNurse={...l.chargeNurse,...s}:(null==(i=l.unitClerk)?void 0:i.id)===e&&(l.unitClerk={...l.unitClerk,...s})}}async function P(){return(await (0,n.GG)(x)).docs.map(e=>e.data())}async function _(e,t){let a=(0,n.H9)(x,e);await (0,n.mZ)(a,{enabled:t,updatedAt:Date.now()})}async function E(e){let t=Date.now(),a=(0,n.wP)(d);for(let s of e){let e=(0,n.H9)(x,s.id);(await (0,n.x7)(e)).exists()||a.set(e,{...s,updatedAt:t})}await a.commit()}async function H(){await E([{id:"mock-patient",name:"Mock Patient Data",description:"Generate mock patient data for testing",enabled:!0},{id:"spectra-pool",name:"Spectra Pool Management",description:"Manage spectra pool assignments",enabled:!1},{id:"acuity-tracking",name:"Acuity Tracking",description:"Track and manage patient acuity levels",enabled:!0},{id:"bed-management",name:"Bed Management",description:"Track bed availability and assignments",enabled:!0},{id:"staff-messaging",name:"Staff Messaging",description:"Internal messaging system for staff",enabled:!1}])}async function G(e){if(g.has(e)){let t=g.get(e);if(t.unit&&(t.patients.length>0||t.nurses.length>0||t.pcts.length>0))return t}let[t,a,s,n,r]=await Promise.all([N(e),v(e),C(e),S(e),M(e)]),i=null,l=null;for(let e of r)"chargeNurse"===e.role?i=e:"unitClerk"===e.role&&(l=e);let d={unit:t,patients:a,nurses:s,pcts:n,chargeNurse:i,unitClerk:l};return g.set(e,d),d}async function O(e){let t=[],a=[],s=[],n=[];for(let a of e.roomRanges){let[s,n]=a.split("-").map(e=>parseInt(e,10));for(let a=s;a<=n;a++)t.push({unitId:e.id,roomNumber:a.toString(),name:"",acuity:Math.floor(5*Math.random())+1,assigned:!1})}for(let t=0;t<e.nurseCardCount;t++)a.push({unitId:e.id,name:"Nurse ".concat(t+1),spectraNumber:"SN".concat(1e4+t),reliefName:"",assignedRooms:[],acuityCapacity:12});for(let t=0;t<e.pctCardCount;t++){let a=t%e.roomRanges.length,[n,r]=e.roomRanges[a].split("-").map(e=>parseInt(e,10)),i=Math.ceil((r-n+1)/e.pctCardCount),l=n+t*i,d=Math.min(l+i-1,r);s.push({unitId:e.id,name:"PCT ".concat(t+1),spectraNumber:"PCT".concat(1e4+t),reliefName:"",roomRange:"".concat(l,"-").concat(d)})}e.hasChargeNurse&&n.push({unitId:e.id,name:"",spectraNumber:"",role:"chargeNurse"}),e.hasUnitClerk&&n.push({unitId:e.id,name:"",spectraNumber:"",role:"unitClerk"});let[r,i,l,d]=await Promise.all([y(t),A(a),I(s),D(n)]),c=null,o=null;for(let e of d)"chargeNurse"===e.role?c=e:"unitClerk"===e.role&&(o=e);return{patients:r,nurses:i,pcts:l,chargeNurse:c,unitClerk:o}}},7118:(e,t,a)=>{a.d(t,{I:()=>n});var s=a(5155);function n(e){let{pct:t,onUpdate:a,editMode:n}=e;return(0,s.jsxs)("div",{className:"border border-green-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Patient Care Tech"}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),n?(0,s.jsx)("input",{type:"text",value:t.name,onChange:e=>{a({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"font-medium",children:t.name||"Unassigned"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),n?(0,s.jsx)("input",{type:"text",value:t.spectraNumber,onChange:e=>{a({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"text-sm",children:t.spectraNumber||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Relief"}),n?(0,s.jsx)("input",{type:"text",value:t.reliefName,onChange:e=>{a({reliefName:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"text-sm",children:t.reliefName||"None"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Room Assignment"}),n?(0,s.jsx)("input",{type:"text",value:t.roomRange,onChange:e=>{a({roomRange:e.target.value})},className:"w-full p-1 border rounded text-sm",placeholder:"e.g., 401-412"}):(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-2 text-center",children:(0,s.jsxs)("span",{className:"font-medium",children:["Rooms ",t.roomRange]})})]})]})}},8262:(e,t,a)=>{a.d(t,{dj:()=>m,oR:()=>u});var s=a(2115);let n=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},8668:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(5155),n=a(2115),r=a(285);function i(e){let{nurse:t,patients:a,onAssign:i,onUnassign:l,onUpdate:d,editMode:c}=e,[o,u]=(0,n.useState)(!1),m=t.assignedRooms.reduce((e,t)=>{let s=a.find(e=>e.roomNumber===t);return e+(s?s.acuity:0)},0),p=m>t.acuityCapacity;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 ".concat(p?"border-red-500 bg-red-50":"border-blue-200"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Nurse Assignment"}),p&&(0,s.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"Acuity Alert"})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),c?(0,s.jsx)("input",{type:"text",value:t.name,onChange:e=>{d({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"font-medium",children:t.name||"Unassigned"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),c?(0,s.jsx)("input",{type:"text",value:t.spectraNumber,onChange:e=>{d({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"text-sm",children:t.spectraNumber||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Relief"}),c?(0,s.jsx)("input",{type:"text",value:t.reliefName,onChange:e=>{d({reliefName:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,s.jsx)("p",{className:"text-sm",children:t.reliefName||"None"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Acuity Capacity"}),c?(0,s.jsx)("input",{type:"number",value:t.acuityCapacity,onChange:e=>{d({acuityCapacity:parseInt(e.target.value,10)||0})},className:"w-full p-1 border rounded text-sm",min:"1"}):(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"h-2.5 rounded-full ".concat(p?"bg-red-600":"bg-blue-600"),style:{width:"".concat(Math.min(100,m/t.acuityCapacity*100),"%")}})}),(0,s.jsxs)("span",{className:"ml-2 text-xs font-medium",children:[m,"/",t.acuityCapacity]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500",children:"Patient Assignments"}),!c&&(0,s.jsx)(r.$,{variant:"outline",size:"sm",className:"text-xs py-1 h-auto",onClick:()=>u(!o),children:o?"Done":"Assign"})]}),(0,s.jsx)("div",{className:"space-y-1 mb-3",children:t.assignedRooms.length>0?t.assignedRooms.map(e=>{let t=a.find(t=>t.roomNumber===e);return(0,s.jsxs)("div",{className:"flex justify-between items-center p-1.5 bg-gray-50 rounded border",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"font-medium text-sm",children:["Room ",e]}),(null==t?void 0:t.name)&&(0,s.jsx)("span",{className:"ml-2 text-xs",children:t.name})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[t&&(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-xs mr-2 ".concat(t.acuity>=4?"bg-red-100 text-red-800":t.acuity>=3?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:t.acuity}),!c&&(0,s.jsx)("button",{onClick:()=>l(e),className:"text-red-500 text-xs hover:text-red-700","aria-label":"Remove patient assignment",children:"\xd7"})]})]},e)}):(0,s.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No patients assigned"})}),o&&!c&&(0,s.jsxs)("div",{className:"mt-3 border-t pt-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium mb-2",children:"Select a patient to assign:"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1",children:a.filter(e=>!e.assigned).map(e=>(0,s.jsxs)("button",{onClick:()=>{i(e.id),t.assignedRooms.length>=5&&u(!1)},className:"text-xs p-1 border rounded hover:bg-blue-50 flex justify-between items-center",children:[(0,s.jsxs)("span",{children:["Room ",e.roomNumber]}),(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-xs ".concat(e.acuity>=4?"bg-red-100 text-red-800":e.acuity>=3?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.acuity})]},e.id))})]})]})]})}},9434:(e,t,a)=>{a.d(t,{cn:()=>r});var s=a(2596),n=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}}}]);