"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{285:(e,t,s)=>{s.d(t,{$:()=>d});var a=s(5155),n=s(2115),r=s(2085),l=s(9434);let i=(0,r.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:r,asChild:d=!1,...c}=e;return(0,a.jsx)("button",{className:(0,l.cn)(i({variant:n,size:r}),s),ref:t,...c})});d.displayName="Button"},2047:(e,t,s)=>{s.d(t,{v:()=>n});var a=s(5155);function n(e){let{title:t,staffMember:s,onUpdate:n,editMode:r,size:l="normal"}=e;return(0,a.jsxs)("div",{className:"border ".concat("Charge Nurse"===t?"border-purple-200":"border-yellow-200"," rounded-lg p-4 ").concat("small"===l?"col-span-1":"col-span-1 md:col-span-2"),children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:t}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),r?(0,a.jsx)("input",{type:"text",value:s.name,onChange:e=>{n({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"font-medium",children:s.name||"Unassigned"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),r?(0,a.jsx)("input",{type:"text",value:s.spectraNumber,onChange:e=>{n({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:s.spectraNumber||"N/A"})]})]}),"chargeNurse"===s.role&&(0,a.jsx)("div",{className:"mt-3 pt-2 border-t border-purple-100",children:(0,a.jsx)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Unit Supervisor"})})]})}},2732:(e,t,s)=>{s.d(t,{B5:()=>C,Dr:()=>v,HW:()=>S,YU:()=>p,Z6:()=>g,ZW:()=>T,cT:()=>b,e4:()=>k});var a=s(5813),n=s(5317);let r=(0,n.rJ)(a.db,"units"),l=(0,n.rJ)(a.db,"patients"),i=(0,n.rJ)(a.db,"nurses"),d=(0,n.rJ)(a.db,"pcts"),c=(0,n.rJ)(a.db,"staff"),u=(0,n.rJ)(a.db,"modules"),o=null,m=new Map;async function p(){if(o)return o;let e=(await (0,n.GG)(r)).docs.map(e=>e.data());return o=e,e}async function x(e){let t=m.get(e);if(null==t?void 0:t.unit)return t.unit;let s=(0,n.H9)(r,e),a=await (0,n.x7)(s);if(a.exists()){let t=a.data();return m.has(e)?m.get(e).unit=t:m.set(e,{unit:t,patients:[],nurses:[],pcts:[],chargeNurse:null,unitClerk:null}),t}return null}async function h(e){let t=Date.now(),s=(0,n.wP)(a.db),r=[];for(let a of e){let e=(0,n.H9)(l),i={...a,id:e.id,createdAt:t,updatedAt:t};s.set(e,i),r.push(i),m.has(a.unitId)&&m.get(a.unitId).patients.push(i)}return await s.commit(),r}async function f(e){let t=m.get(e);if((null==t?void 0:t.patients.length)>0)return t.patients;let s=(0,n.P)(l,(0,n._M)("unitId","==",e)),a=(await (0,n.GG)(s)).docs.map(e=>e.data());return m.has(e)?m.get(e).patients=a:m.set(e,{unit:null,patients:a,nurses:[],pcts:[],chargeNurse:null,unitClerk:null}),a}async function g(e,t){let s=(0,n.H9)(l,e),a={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(s,a),m.entries())){let t=r.patients.findIndex(t=>t.id===e);if(-1!==t){r.patients[t]={...r.patients[t],...a};break}}}async function b(e){let t=(0,n.wP)(a.db),s=Date.now();for(let{id:a,data:r}of e){let e=(0,n.H9)(l,a);for(let[n,l]of(t.update(e,{...r,updatedAt:s}),m.entries())){let e=l.patients.findIndex(e=>e.id===a);if(-1!==e){l.patients[e]={...l.patients[e],...r,updatedAt:s};break}}}await t.commit()}async function N(e){let t=Date.now(),s=(0,n.wP)(a.db),r=[];for(let a of e){let e=(0,n.H9)(i),l={...a,id:e.id,createdAt:t,updatedAt:t};s.set(e,l),r.push(l),m.has(a.unitId)&&m.get(a.unitId).nurses.push(l)}return await s.commit(),r}async function y(e){let t=m.get(e);if((null==t?void 0:t.nurses.length)>0)return t.nurses;let s=(0,n.P)(i,(0,n._M)("unitId","==",e)),a=(await (0,n.GG)(s)).docs.map(e=>e.data());return m.has(e)?m.get(e).nurses=a:m.set(e,{unit:null,patients:[],nurses:a,pcts:[],chargeNurse:null,unitClerk:null}),a}async function v(e,t){let s=(0,n.H9)(i,e),a={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(s,a),m.entries())){let t=r.nurses.findIndex(t=>t.id===e);if(-1!==t){r.nurses[t]={...r.nurses[t],...a};break}}}async function j(e){let t=Date.now(),s=(0,n.wP)(a.db),r=[];for(let a of e){let e=(0,n.H9)(d),l={...a,id:e.id,createdAt:t,updatedAt:t};s.set(e,l),r.push(l),m.has(a.unitId)&&m.get(a.unitId).pcts.push(l)}return await s.commit(),r}async function w(e){let t=m.get(e);if((null==t?void 0:t.pcts.length)>0)return t.pcts;let s=(0,n.P)(d,(0,n._M)("unitId","==",e)),a=(await (0,n.GG)(s)).docs.map(e=>e.data());return m.has(e)?m.get(e).pcts=a:m.set(e,{unit:null,patients:[],nurses:[],pcts:a,chargeNurse:null,unitClerk:null}),a}async function C(e,t){let s=(0,n.H9)(d,e),a={...t,updatedAt:Date.now()};for(let[t,r]of(await (0,n.mZ)(s,a),m.entries())){let t=r.pcts.findIndex(t=>t.id===e);if(-1!==t){r.pcts[t]={...r.pcts[t],...a};break}}}async function A(e){let t=Date.now(),s=(0,n.wP)(a.db),r=[];for(let a of e){let e=(0,n.H9)(c),l={...a,id:e.id,createdAt:t,updatedAt:t};s.set(e,l),r.push(l),m.has(a.unitId)&&("chargeNurse"===a.role?m.get(a.unitId).chargeNurse=l:"unitClerk"===a.role&&(m.get(a.unitId).unitClerk=l))}return await s.commit(),r}async function I(e){let t=(0,n.P)(c,(0,n._M)("unitId","==",e));return(await (0,n.GG)(t)).docs.map(e=>e.data())}async function k(e,t){let s=(0,n.H9)(c,e),a={...t,updatedAt:Date.now()};for(let[t,i]of(await (0,n.mZ)(s,a),m.entries())){var r,l;(null==(r=i.chargeNurse)?void 0:r.id)===e?i.chargeNurse={...i.chargeNurse,...a}:(null==(l=i.unitClerk)?void 0:l.id)===e&&(i.unitClerk={...i.unitClerk,...a})}}async function S(e){if(m.has(e)){let t=m.get(e);if(t.unit&&(t.patients.length>0||t.nurses.length>0||t.pcts.length>0))return t}let[t,s,a,n,r]=await Promise.all([x(e),f(e),y(e),w(e),I(e)]),l=null,i=null;for(let e of r)"chargeNurse"===e.role?l=e:"unitClerk"===e.role&&(i=e);let d={unit:t,patients:s,nurses:a,pcts:n,chargeNurse:l,unitClerk:i};return m.set(e,d),d}async function T(e){let t=[],s=[],a=[],n=[];for(let s of e.roomRanges){let[a,n]=s.split("-").map(e=>parseInt(e,10));for(let s=a;s<=n;s++)t.push({unitId:e.id,roomNumber:s.toString(),name:"",acuity:Math.floor(5*Math.random())+1,assigned:!1})}for(let t=0;t<e.nurseCardCount;t++)s.push({unitId:e.id,name:"Nurse ".concat(t+1),spectraNumber:"SN".concat(1e4+t),reliefName:"",assignedRooms:[],acuityCapacity:12});for(let t=0;t<e.pctCardCount;t++){let s=t%e.roomRanges.length,[n,r]=e.roomRanges[s].split("-").map(e=>parseInt(e,10)),l=Math.ceil((r-n+1)/e.pctCardCount),i=n+t*l,d=Math.min(i+l-1,r);a.push({unitId:e.id,name:"PCT ".concat(t+1),spectraNumber:"PCT".concat(1e4+t),reliefName:"",roomRange:"".concat(i,"-").concat(d)})}e.hasChargeNurse&&n.push({unitId:e.id,name:"",spectraNumber:"",role:"chargeNurse"}),e.hasUnitClerk&&n.push({unitId:e.id,name:"",spectraNumber:"",role:"unitClerk"});let[r,l,i,d]=await Promise.all([h(t),N(s),j(a),A(n)]),c=null,u=null;for(let e of d)"chargeNurse"===e.role?c=e:"unitClerk"===e.role&&(u=e);return{patients:r,nurses:l,pcts:i,chargeNurse:c,unitClerk:u}}},5813:(e,t,s)=>{s.d(t,{db:()=>d,yA:()=>i});var a=s(3915),n=s(5317),r=s(7505),l=s(4903);let i=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyARvbAJtv-NBJnJQ3EdZNU3WsMnXThFzhM",authDomain:"unitview.firebaseapp.com",databaseURL:"https://unitview-default-rtdb.firebaseio.com",projectId:"unitview",storageBucket:"unitview.firebasestorage.app",messagingSenderId:"185648925766",appId:"1:185648925766:web:5ae6271dd4977f6e158e47"}):(0,a.Dk)()[0],d=(0,n.aU)(i);try{(0,n.ol)(d).catch(e=>{console.error("Firestore persistence error:",e)})}catch(e){console.warn("Firestore persistence already enabled or not supported")}(0,r.c7)(i),(0,l.xI)(i)},7118:(e,t,s)=>{s.d(t,{I:()=>n});var a=s(5155);function n(e){let{pct:t,onUpdate:s,editMode:n}=e;return(0,a.jsxs)("div",{className:"border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Patient Care Tech"}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),n?(0,a.jsx)("input",{type:"text",value:t.name,onChange:e=>{s({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"font-medium",children:t.name||"Unassigned"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),n?(0,a.jsx)("input",{type:"text",value:t.spectraNumber,onChange:e=>{s({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:t.spectraNumber||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Relief"}),n?(0,a.jsx)("input",{type:"text",value:t.reliefName,onChange:e=>{s({reliefName:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:t.reliefName||"None"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Room Assignment"}),n?(0,a.jsx)("input",{type:"text",value:t.roomRange,onChange:e=>{s({roomRange:e.target.value})},className:"w-full p-1 border rounded text-sm",placeholder:"e.g., 401-412"}):(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-2 text-center",children:(0,a.jsxs)("span",{className:"font-medium",children:["Rooms ",t.roomRange]})})]})]})}},8262:(e,t,s)=>{s.d(t,{dj:()=>m,oR:()=>o});var a=s(2115);let n=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),u({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function u(e){c=i(c,e),d.forEach(e=>{e(c)})}function o(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},8668:(e,t,s)=>{s.d(t,{c:()=>l});var a=s(5155),n=s(2115),r=s(285);function l(e){let{nurse:t,patients:s,onAssign:l,onUnassign:i,onUpdate:d,editMode:c}=e,[u,o]=(0,n.useState)(!1),m=t.assignedRooms.reduce((e,t)=>{let a=s.find(e=>e.roomNumber===t);return e+(a?a.acuity:0)},0),p=m>t.acuityCapacity;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(p?"border-red-500 bg-red-50":"border-blue-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Nurse Assignment"}),p&&(0,a.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"Acuity Alert"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),c?(0,a.jsx)("input",{type:"text",value:t.name,onChange:e=>{d({name:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"font-medium",children:t.name||"Unassigned"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Spectra #"}),c?(0,a.jsx)("input",{type:"text",value:t.spectraNumber,onChange:e=>{d({spectraNumber:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:t.spectraNumber||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Relief"}),c?(0,a.jsx)("input",{type:"text",value:t.reliefName,onChange:e=>{d({reliefName:e.target.value})},className:"w-full p-1 border rounded text-sm"}):(0,a.jsx)("p",{className:"text-sm",children:t.reliefName||"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500",children:"Acuity Capacity"}),c?(0,a.jsx)("input",{type:"number",value:t.acuityCapacity,onChange:e=>{d({acuityCapacity:parseInt(e.target.value,10)||0})},className:"w-full p-1 border rounded text-sm",min:"1"}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"h-2.5 rounded-full ".concat(p?"bg-red-600":"bg-blue-600"),style:{width:"".concat(Math.min(100,m/t.acuityCapacity*100),"%")}})}),(0,a.jsxs)("span",{className:"ml-2 text-xs font-medium",children:[m,"/",t.acuityCapacity]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:"Patient Assignments"}),!c&&(0,a.jsx)(r.$,{variant:"outline",size:"sm",className:"text-xs py-1 h-auto",onClick:()=>o(!u),children:u?"Done":"Assign"})]}),(0,a.jsx)("div",{className:"space-y-1 mb-3",children:t.assignedRooms.length>0?t.assignedRooms.map(e=>{let t=s.find(t=>t.roomNumber===e);return(0,a.jsxs)("div",{className:"flex justify-between items-center p-1.5 bg-gray-50 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-medium text-sm",children:["Room ",e]}),(null==t?void 0:t.name)&&(0,a.jsx)("span",{className:"ml-2 text-xs",children:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[t&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-xs mr-2 ".concat(t.acuity>=4?"bg-red-100 text-red-800":t.acuity>=3?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:t.acuity}),!c&&(0,a.jsx)("button",{onClick:()=>i(e),className:"text-red-500 text-xs hover:text-red-700","aria-label":"Remove patient assignment",children:"\xd7"})]})]},e)}):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No patients assigned"})}),u&&!c&&(0,a.jsxs)("div",{className:"mt-3 border-t pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium mb-2",children:"Select a patient to assign:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1",children:s.filter(e=>!e.assigned).map(e=>(0,a.jsxs)("button",{onClick:()=>{l(e.id),t.assignedRooms.length>=5&&o(!1)},className:"text-xs p-1 border rounded hover:bg-blue-50 flex justify-between items-center",children:[(0,a.jsxs)("span",{children:["Room ",e.roomNumber]}),(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded-full text-xs ".concat(e.acuity>=4?"bg-red-100 text-red-800":e.acuity>=3?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.acuity})]},e.id))})]})]})]})}},9434:(e,t,s)=>{s.d(t,{cn:()=>r});var a=s(2596),n=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}}}]);