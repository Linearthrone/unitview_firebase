"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/facility-setup/page",{

/***/ "(app-pages-browser)/./src/lib/firebase.ts":
/*!*****************************!*\
  !*** ./src/lib/firebase.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   app: function() { return /* reexport safe */ _firebase_config__WEBPACK_IMPORTED_MODULE_0__.app; },\n/* harmony export */   auth: function() { return /* reexport safe */ _firebase_config__WEBPACK_IMPORTED_MODULE_0__.auth; },\n/* harmony export */   batchCreateNurses: function() { return /* binding */ batchCreateNurses; },\n/* harmony export */   batchCreatePCTs: function() { return /* binding */ batchCreatePCTs; },\n/* harmony export */   batchCreatePatients: function() { return /* binding */ batchCreatePatients; },\n/* harmony export */   batchCreateStaffMembers: function() { return /* binding */ batchCreateStaffMembers; },\n/* harmony export */   batchUpdatePatients: function() { return /* binding */ batchUpdatePatients; },\n/* harmony export */   createFacility: function() { return /* binding */ createFacility; },\n/* harmony export */   createNurse: function() { return /* binding */ createNurse; },\n/* harmony export */   createPCT: function() { return /* binding */ createPCT; },\n/* harmony export */   createPatient: function() { return /* binding */ createPatient; },\n/* harmony export */   createStaffMember: function() { return /* binding */ createStaffMember; },\n/* harmony export */   createUnit: function() { return /* binding */ createUnit; },\n/* harmony export */   db: function() { return /* reexport safe */ _firebase_config__WEBPACK_IMPORTED_MODULE_0__.db; },\n/* harmony export */   deleteNurse: function() { return /* binding */ deleteNurse; },\n/* harmony export */   deletePCT: function() { return /* binding */ deletePCT; },\n/* harmony export */   deletePatient: function() { return /* binding */ deletePatient; },\n/* harmony export */   deleteStaffMember: function() { return /* binding */ deleteStaffMember; },\n/* harmony export */   deleteUnit: function() { return /* binding */ deleteUnit; },\n/* harmony export */   deleteUnitNurses: function() { return /* binding */ deleteUnitNurses; },\n/* harmony export */   deleteUnitPCTs: function() { return /* binding */ deleteUnitPCTs; },\n/* harmony export */   deleteUnitPatients: function() { return /* binding */ deleteUnitPatients; },\n/* harmony export */   deleteUnitStaff: function() { return /* binding */ deleteUnitStaff; },\n/* harmony export */   getFacilities: function() { return /* binding */ getFacilities; },\n/* harmony export */   getModules: function() { return /* binding */ getModules; },\n/* harmony export */   getNursesByUnit: function() { return /* binding */ getNursesByUnit; },\n/* harmony export */   getPCTsByUnit: function() { return /* binding */ getPCTsByUnit; },\n/* harmony export */   getPatientsByUnit: function() { return /* binding */ getPatientsByUnit; },\n/* harmony export */   getStaffByUnit: function() { return /* binding */ getStaffByUnit; },\n/* harmony export */   getStaffByUnitAndRole: function() { return /* binding */ getStaffByUnitAndRole; },\n/* harmony export */   getUnit: function() { return /* binding */ getUnit; },\n/* harmony export */   getUnits: function() { return /* binding */ getUnits; },\n/* harmony export */   initializeModules: function() { return /* binding */ initializeModules; },\n/* harmony export */   initializeUnitData: function() { return /* binding */ initializeUnitData; },\n/* harmony export */   loadUnitData: function() { return /* binding */ loadUnitData; },\n/* harmony export */   setupDefaultModules: function() { return /* binding */ setupDefaultModules; },\n/* harmony export */   storage: function() { return /* reexport safe */ _firebase_config__WEBPACK_IMPORTED_MODULE_0__.storage; },\n/* harmony export */   updateModule: function() { return /* binding */ updateModule; },\n/* harmony export */   updateNurse: function() { return /* binding */ updateNurse; },\n/* harmony export */   updatePCT: function() { return /* binding */ updatePCT; },\n/* harmony export */   updatePatient: function() { return /* binding */ updatePatient; },\n/* harmony export */   updateStaffMember: function() { return /* binding */ updateStaffMember; },\n/* harmony export */   updateUnit: function() { return /* binding */ updateUnit; }\n/* harmony export */ });\n/* harmony import */ var _firebase_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebase-config */ \"(app-pages-browser)/./src/lib/firebase-config.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n\n\n// Firebase Collection References\nconst facilitiesCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"facilities\");\nconst unitsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"units\");\nconst patientsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"patients\");\nconst nursesCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"nurses\");\nconst pctsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"pcts\");\nconst staffCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"staff\");\nconst modulesCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, \"modules\");\n// Cache\nlet facilitiesCache = null;\nlet unitsCache = new Map();\nlet unitDataCache = new Map();\n// Facility Functions\nasync function createFacility(facilityData) {\n    const timestamp = Date.now();\n    const facilityRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(facilitiesCollection);\n    const newFacility = {\n        id: facilityRef.id,\n        ...facilityData,\n        createdAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(facilityRef, newFacility);\n    if (facilitiesCache) {\n        facilitiesCache.push(newFacility);\n    } else {\n        // If cache wasn't initialized, fetch it again to include the new one.\n        // This is a simple way to ensure consistency.\n        facilitiesCache = null;\n        await getFacilities();\n    }\n    return newFacility;\n}\nasync function getFacilities() {\n    if (facilitiesCache) {\n        return facilitiesCache;\n    }\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(facilitiesCollection);\n    const facilities = snapshot.docs.map((doc)=>({\n            id: doc.id,\n            ...doc.data()\n        }));\n    facilitiesCache = facilities;\n    return facilities;\n}\n// Unit Functions\nasync function createUnit(unitData) {\n    const timestamp = Date.now();\n    const unitRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(unitsCollection);\n    const newUnit = {\n        ...unitData,\n        id: unitRef.id,\n        createdAt: timestamp,\n        updatedAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(unitRef, newUnit);\n    // Safely update cache\n    const facilityUnits = unitsCache.get(newUnit.facilityId) || [];\n    unitsCache.set(newUnit.facilityId, [\n        ...facilityUnits,\n        newUnit\n    ]);\n    return newUnit;\n}\nasync function getUnits(facilityId) {\n    if (!facilityId) return [];\n    // Return from cache if available\n    if (unitsCache.has(facilityId)) {\n        return unitsCache.get(facilityId);\n    }\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(unitsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"facilityId\", \"==\", facilityId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    const units = snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n    unitsCache.set(facilityId, units);\n    return units;\n}\nasync function getUnit(unitId) {\n    // Check cache first: iterate through all facilities in unitsCache\n    for (const facilityUnits of unitsCache.values()){\n        const found = facilityUnits.find((u)=>u.id === unitId);\n        if (found) {\n            return found;\n        }\n    }\n    const unitRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(unitsCollection, unitId);\n    const unitSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(unitRef);\n    if (unitSnap.exists()) {\n        const unit = {\n            id: unitSnap.id,\n            ...unitSnap.data()\n        };\n        // Pre-warm the cache if it doesn't exist for that facility\n        if (!unitsCache.has(unit.facilityId)) {\n            await getUnits(unit.facilityId);\n        }\n        return unit;\n    }\n    return null;\n}\nasync function updateUnit(unitId, data) {\n    const unitRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(unitsCollection, unitId);\n    const updateData = {\n        ...data,\n        updatedAt: Date.now()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(unitRef, updateData);\n    // Update cache\n    unitsCache.forEach((units, facilityId)=>{\n        const index = units.findIndex((u)=>u.id === unitId);\n        if (index !== -1) {\n            const updatedUnits = [\n                ...units\n            ];\n            updatedUnits[index] = {\n                ...updatedUnits[index],\n                ...updateData\n            };\n            unitsCache.set(facilityId, updatedUnits);\n        }\n    });\n    if (unitDataCache.has(unitId) && unitDataCache.get(unitId).unit) {\n        unitDataCache.get(unitId).unit = {\n            ...unitDataCache.get(unitId).unit,\n            ...updateData\n        };\n    }\n}\nasync function deleteUnit(unitId, facilityId) {\n    const unitRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(unitsCollection, unitId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(unitRef);\n    // Delete related data\n    await deleteUnitPatients(unitId);\n    await deleteUnitNurses(unitId);\n    await deleteUnitPCTs(unitId);\n    await deleteUnitStaff(unitId);\n    // Update cache\n    const facilityUnits = unitsCache.get(facilityId) || [];\n    unitsCache.set(facilityId, facilityUnits.filter((u)=>u.id !== unitId));\n    unitDataCache.delete(unitId);\n}\n// Patient Functions\nasync function createPatient(patientData) {\n    const timestamp = Date.now();\n    const patientRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(patientsCollection);\n    const newPatient = {\n        ...patientData,\n        id: patientRef.id,\n        createdAt: timestamp,\n        updatedAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(patientRef, newPatient);\n    // Update cache\n    if (unitDataCache.has(patientData.unitId)) {\n        unitDataCache.get(patientData.unitId).patients.push(newPatient);\n    }\n    return newPatient;\n}\n// Batch create patients for better performance\nasync function batchCreatePatients(patientsData) {\n    if (patientsData.length === 0) {\n        return [];\n    }\n    const timestamp = Date.now();\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    const newPatients = [];\n    for (const patientData of patientsData){\n        const patientRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(patientsCollection);\n        const newPatient = {\n            ...patientData,\n            id: patientRef.id,\n            createdAt: timestamp,\n            updatedAt: timestamp\n        };\n        batch.set(patientRef, newPatient);\n        newPatients.push(newPatient);\n    }\n    await batch.commit();\n    return newPatients;\n}\nasync function getPatientsByUnit(unitId) {\n    if (!unitId) return [];\n    // Check cache first\n    const cachedData = unitDataCache.get(unitId);\n    if ((cachedData === null || cachedData === void 0 ? void 0 : cachedData.patients.length) > 0) {\n        return cachedData.patients;\n    }\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(patientsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    const patients = snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n    if (unitDataCache.has(unitId)) {\n        unitDataCache.get(unitId).patients = patients;\n    } else {\n        unitDataCache.set(unitId, {\n            unit: null,\n            patients,\n            nurses: [],\n            pcts: [],\n            chargeNurse: null,\n            unitClerk: null\n        });\n    }\n    return patients;\n}\nasync function updatePatient(patientId, data) {\n    const patientRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(patientsCollection, patientId);\n    const updateData = {\n        ...data,\n        updatedAt: Date.now()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(patientRef, updateData);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        const index = cachedData.patients.findIndex((p)=>p.id === patientId);\n        if (index !== -1) {\n            cachedData.patients[index] = {\n                ...cachedData.patients[index],\n                ...updateData\n            };\n            break;\n        }\n    }\n}\n// Batch update patients for better performance\nasync function batchUpdatePatients(updates) {\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    const timestamp = Date.now();\n    for (const { id, data } of updates){\n        const patientRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(patientsCollection, id);\n        batch.update(patientRef, {\n            ...data,\n            updatedAt: timestamp\n        });\n        // Update cache\n        for (const [unitId, cachedData] of unitDataCache.entries()){\n            const index = cachedData.patients.findIndex((p)=>p.id === id);\n            if (index !== -1) {\n                cachedData.patients[index] = {\n                    ...cachedData.patients[index],\n                    ...data,\n                    updatedAt: timestamp\n                };\n                break;\n            }\n        }\n    }\n    await batch.commit();\n}\nasync function deletePatient(patientId) {\n    const patientRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(patientsCollection, patientId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(patientRef);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        cachedData.patients = cachedData.patients.filter((p)=>p.id !== patientId);\n    }\n}\nasync function deleteUnitPatients(unitId) {\n    if (!unitId) return;\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(patientsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (snapshot.empty) {\n        return;\n    }\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    snapshot.docs.forEach((doc)=>{\n        batch.delete(doc.ref);\n    });\n    await batch.commit();\n}\n// Nurse Functions\nasync function createNurse(nurseData) {\n    const timestamp = Date.now();\n    const nurseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(nursesCollection);\n    const newNurse = {\n        ...nurseData,\n        id: nurseRef.id,\n        createdAt: timestamp,\n        updatedAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(nurseRef, newNurse);\n    // Update cache\n    if (unitDataCache.has(nurseData.unitId)) {\n        unitDataCache.get(nurseData.unitId).nurses.push(newNurse);\n    }\n    return newNurse;\n}\n// Batch create nurses for better performance\nasync function batchCreateNurses(nursesData) {\n    if (nursesData.length === 0) {\n        return [];\n    }\n    const timestamp = Date.now();\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    const newNurses = [];\n    for (const nurseData of nursesData){\n        const nurseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(nursesCollection);\n        const newNurse = {\n            ...nurseData,\n            id: nurseRef.id,\n            createdAt: timestamp,\n            updatedAt: timestamp\n        };\n        batch.set(nurseRef, newNurse);\n        newNurses.push(newNurse);\n    }\n    await batch.commit();\n    return newNurses;\n}\nasync function getNursesByUnit(unitId) {\n    if (!unitId) return [];\n    // Check cache first\n    const cachedData = unitDataCache.get(unitId);\n    if ((cachedData === null || cachedData === void 0 ? void 0 : cachedData.nurses.length) > 0) {\n        return cachedData.nurses;\n    }\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(nursesCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    const nurses = snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n    if (unitDataCache.has(unitId)) {\n        unitDataCache.get(unitId).nurses = nurses;\n    } else {\n        unitDataCache.set(unitId, {\n            unit: null,\n            patients: [],\n            nurses,\n            pcts: [],\n            chargeNurse: null,\n            unitClerk: null\n        });\n    }\n    return nurses;\n}\nasync function updateNurse(nurseId, data) {\n    const nurseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(nursesCollection, nurseId);\n    const updateData = {\n        ...data,\n        updatedAt: Date.now()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(nurseRef, updateData);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        const index = cachedData.nurses.findIndex((n)=>n.id === nurseId);\n        if (index !== -1) {\n            cachedData.nurses[index] = {\n                ...cachedData.nurses[index],\n                ...updateData\n            };\n            break;\n        }\n    }\n}\nasync function deleteNurse(nurseId) {\n    const nurseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(nursesCollection, nurseId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(nurseRef);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        cachedData.nurses = cachedData.nurses.filter((n)=>n.id !== nurseId);\n    }\n}\nasync function deleteUnitNurses(unitId) {\n    if (!unitId) return;\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(nursesCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (snapshot.empty) {\n        return;\n    }\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    snapshot.docs.forEach((doc)=>{\n        batch.delete(doc.ref);\n    });\n    await batch.commit();\n}\n// PCT Functions\nasync function createPCT(pctData) {\n    const timestamp = Date.now();\n    const pctRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(pctsCollection);\n    const newPCT = {\n        ...pctData,\n        id: pctRef.id,\n        createdAt: timestamp,\n        updatedAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(pctRef, newPCT);\n    // Update cache\n    if (unitDataCache.has(pctData.unitId)) {\n        unitDataCache.get(pctData.unitId).pcts.push(newPCT);\n    }\n    return newPCT;\n}\n// Batch create PCTs for better performance\nasync function batchCreatePCTs(pctsData) {\n    if (pctsData.length === 0) {\n        return [];\n    }\n    const timestamp = Date.now();\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    const newPCTs = [];\n    for (const pctData of pctsData){\n        const pctRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(pctsCollection);\n        const newPCT = {\n            ...pctData,\n            id: pctRef.id,\n            createdAt: timestamp,\n            updatedAt: timestamp\n        };\n        batch.set(pctRef, newPCT);\n        newPCTs.push(newPCT);\n    }\n    await batch.commit();\n    return newPCTs;\n}\nasync function getPCTsByUnit(unitId) {\n    if (!unitId) return [];\n    // Check cache first\n    const cachedData = unitDataCache.get(unitId);\n    if ((cachedData === null || cachedData === void 0 ? void 0 : cachedData.pcts.length) > 0) {\n        return cachedData.pcts;\n    }\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(pctsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    const pcts = snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n    if (unitDataCache.has(unitId)) {\n        unitDataCache.get(unitId).pcts = pcts;\n    } else {\n        unitDataCache.set(unitId, {\n            unit: null,\n            patients: [],\n            nurses: [],\n            pcts,\n            chargeNurse: null,\n            unitClerk: null\n        });\n    }\n    return pcts;\n}\nasync function updatePCT(pctId, data) {\n    const pctRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(pctsCollection, pctId);\n    const updateData = {\n        ...data,\n        updatedAt: Date.now()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(pctRef, updateData);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        const index = cachedData.pcts.findIndex((p)=>p.id === pctId);\n        if (index !== -1) {\n            cachedData.pcts[index] = {\n                ...cachedData.pcts[index],\n                ...updateData\n            };\n            break;\n        }\n    }\n}\nasync function deletePCT(pctId) {\n    const pctRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(pctsCollection, pctId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(pctRef);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        cachedData.pcts = cachedData.pcts.filter((p)=>p.id !== pctId);\n    }\n}\nasync function deleteUnitPCTs(unitId) {\n    if (!unitId) return;\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(pctsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (snapshot.empty) {\n        return;\n    }\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    snapshot.docs.forEach((doc)=>{\n        batch.delete(doc.ref);\n    });\n    await batch.commit();\n}\n// Staff Functions\nasync function createStaffMember(staffData) {\n    const timestamp = Date.now();\n    const staffRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(staffCollection);\n    const newStaff = {\n        ...staffData,\n        id: staffRef.id,\n        createdAt: timestamp,\n        updatedAt: timestamp\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(staffRef, newStaff);\n    // Update cache\n    if (unitDataCache.has(staffData.unitId)) {\n        if (staffData.role === \"chargeNurse\") {\n            unitDataCache.get(staffData.unitId).chargeNurse = newStaff;\n        } else if (staffData.role === \"unitClerk\") {\n            unitDataCache.get(staffData.unitId).unitClerk = newStaff;\n        }\n    }\n    return newStaff;\n}\n// Batch create staff members for better performance\nasync function batchCreateStaffMembers(staffData) {\n    if (staffData.length === 0) {\n        return [];\n    }\n    const timestamp = Date.now();\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    const newStaffMembers = [];\n    for (const staffMemberData of staffData){\n        const staffRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(staffCollection);\n        const newStaff = {\n            ...staffMemberData,\n            id: staffRef.id,\n            createdAt: timestamp,\n            updatedAt: timestamp\n        };\n        batch.set(staffRef, newStaff);\n        newStaffMembers.push(newStaff);\n    }\n    await batch.commit();\n    return newStaffMembers;\n}\nasync function getStaffByUnit(unitId) {\n    if (!unitId) return [];\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(staffCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    return snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n}\nasync function getStaffByUnitAndRole(unitId, role) {\n    if (!unitId) return null;\n    // Check cache first\n    const cachedData = unitDataCache.get(unitId);\n    if (role === \"chargeNurse\" && (cachedData === null || cachedData === void 0 ? void 0 : cachedData.chargeNurse)) {\n        return cachedData.chargeNurse;\n    } else if (role === \"unitClerk\" && (cachedData === null || cachedData === void 0 ? void 0 : cachedData.unitClerk)) {\n        return cachedData.unitClerk;\n    }\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(staffCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"role\", \"==\", role));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (snapshot.empty) {\n        return null;\n    }\n    const staffData = snapshot.docs[0].data();\n    const staffMember = {\n        id: snapshot.docs[0].id,\n        ...staffData\n    };\n    if (unitDataCache.has(unitId)) {\n        if (role === \"chargeNurse\") {\n            unitDataCache.get(unitId).chargeNurse = staffMember;\n        } else if (role === \"unitClerk\") {\n            unitDataCache.get(unitId).unitClerk = staffMember;\n        }\n    } else {\n        unitDataCache.set(unitId, {\n            unit: null,\n            patients: [],\n            nurses: [],\n            pcts: [],\n            chargeNurse: role === \"chargeNurse\" ? staffMember : null,\n            unitClerk: role === \"unitClerk\" ? staffMember : null\n        });\n    }\n    return staffMember;\n}\nasync function updateStaffMember(staffId, data) {\n    const staffRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(staffCollection, staffId);\n    const updateData = {\n        ...data,\n        updatedAt: Date.now()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(staffRef, updateData);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        var _cachedData_chargeNurse, _cachedData_unitClerk;\n        if (((_cachedData_chargeNurse = cachedData.chargeNurse) === null || _cachedData_chargeNurse === void 0 ? void 0 : _cachedData_chargeNurse.id) === staffId) {\n            cachedData.chargeNurse = {\n                ...cachedData.chargeNurse,\n                ...updateData\n            };\n        } else if (((_cachedData_unitClerk = cachedData.unitClerk) === null || _cachedData_unitClerk === void 0 ? void 0 : _cachedData_unitClerk.id) === staffId) {\n            cachedData.unitClerk = {\n                ...cachedData.unitClerk,\n                ...updateData\n            };\n        }\n    }\n}\nasync function deleteStaffMember(staffId) {\n    const staffRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(staffCollection, staffId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(staffRef);\n    // Update cache\n    for (const [unitId, cachedData] of unitDataCache.entries()){\n        var _cachedData_chargeNurse, _cachedData_unitClerk;\n        if (((_cachedData_chargeNurse = cachedData.chargeNurse) === null || _cachedData_chargeNurse === void 0 ? void 0 : _cachedData_chargeNurse.id) === staffId) {\n            cachedData.chargeNurse = null;\n        } else if (((_cachedData_unitClerk = cachedData.unitClerk) === null || _cachedData_unitClerk === void 0 ? void 0 : _cachedData_unitClerk.id) === staffId) {\n            cachedData.unitClerk = null;\n        }\n    }\n}\nasync function deleteUnitStaff(unitId) {\n    if (!unitId) return;\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(staffCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"unitId\", \"==\", unitId));\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (snapshot.empty) {\n        return;\n    }\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    snapshot.docs.forEach((doc)=>{\n        batch.delete(doc.ref);\n    });\n    await batch.commit();\n}\n// Module Functions\nasync function getModules() {\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(modulesCollection);\n    return snapshot.docs.map((doc)=>{\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    });\n}\nasync function updateModule(moduleId, enabled) {\n    const moduleRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(modulesCollection, moduleId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(moduleRef, {\n        enabled,\n        updatedAt: Date.now()\n    });\n}\nasync function initializeModules(modules) {\n    const timestamp = Date.now();\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.writeBatch)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db);\n    for (const module of modules){\n        const moduleRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(modulesCollection, module.id);\n        const moduleSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(moduleRef);\n        if (!moduleSnap.exists()) {\n            batch.set(moduleRef, {\n                ...module,\n                updatedAt: timestamp\n            });\n        }\n    }\n    await batch.commit();\n}\n// Initialize default modules if they don't exist\nasync function setupDefaultModules() {\n    const defaultModules = [\n        {\n            id: \"mock-patient\",\n            name: \"Mock Patient Data\",\n            description: \"Generate mock patient data for testing\",\n            enabled: true\n        },\n        {\n            id: \"spectra-pool\",\n            name: \"Spectra Pool Management\",\n            description: \"Manage spectra pool assignments\",\n            enabled: false\n        },\n        {\n            id: \"acuity-tracking\",\n            name: \"Acuity Tracking\",\n            description: \"Track and manage patient acuity levels\",\n            enabled: true\n        },\n        {\n            id: \"bed-management\",\n            name: \"Bed Management\",\n            description: \"Track bed availability and assignments\",\n            enabled: true\n        },\n        {\n            id: \"staff-messaging\",\n            name: \"Staff Messaging\",\n            description: \"Internal messaging system for staff\",\n            enabled: false\n        }\n    ];\n    await initializeModules(defaultModules);\n}\n// Optimized function to load all unit data at once\nasync function loadUnitData(unitId) {\n    if (!unitId) {\n        return {\n            unit: null,\n            patients: [],\n            nurses: [],\n            pcts: [],\n            chargeNurse: null,\n            unitClerk: null\n        };\n    }\n    // Check cache first\n    const cached = unitDataCache.get(unitId);\n    if ((cached === null || cached === void 0 ? void 0 : cached.unit) && cached.patients.length > 0) {\n        return cached;\n    }\n    // Fetch the unit first, as we need it for context.\n    const unit = await getUnit(unitId);\n    // If no unit, there's nothing to load.\n    if (!unit) {\n        return {\n            unit: null,\n            patients: [],\n            nurses: [],\n            pcts: [],\n            chargeNurse: null,\n            unitClerk: null\n        };\n    }\n    // Now, fetch all related data in parallel.\n    const [patients, nurses, pcts, chargeNurse, unitClerk] = await Promise.all([\n        getPatientsByUnit(unitId),\n        getNursesByUnit(unitId),\n        getPCTsByUnit(unitId),\n        getStaffByUnitAndRole(unitId, \"chargeNurse\"),\n        getStaffByUnitAndRole(unitId, \"unitClerk\")\n    ]);\n    const data = {\n        unit,\n        patients,\n        nurses,\n        pcts,\n        chargeNurse,\n        unitClerk\n    };\n    // Store the fully loaded data in the cache.\n    unitDataCache.set(unitId, data);\n    return data;\n}\nasync function initializeUnitData(unit) {\n    // Generate all the data first\n    const patientsData = [];\n    const nursesData = [];\n    const pctsData = [];\n    const staffData = [];\n    // Generate patient data\n    for (const range of unit.roomRanges){\n        const [start, end] = range.split(\"-\").map((num)=>parseInt(num, 10));\n        for(let roomNum = start; roomNum <= end; roomNum++){\n            patientsData.push({\n                unitId: unit.id,\n                roomNumber: roomNum.toString(),\n                name: \"\",\n                acuity: Math.floor(Math.random() * 5) + 1,\n                assigned: false\n            });\n        }\n    }\n    // Generate nurse data\n    for(let i = 0; i < unit.nurseCardCount; i++){\n        nursesData.push({\n            unitId: unit.id,\n            name: \"Nurse \".concat(i + 1),\n            spectraNumber: \"SN\".concat(10000 + i),\n            reliefName: \"\",\n            assignedRooms: [],\n            acuityCapacity: 12\n        });\n    }\n    // Generate PCT data\n    for(let i = 0; i < unit.pctCardCount; i++){\n        // Divide room ranges among PCTs\n        const rangeIndex = i % unit.roomRanges.length;\n        const [start, end] = unit.roomRanges[rangeIndex].split(\"-\").map((num)=>parseInt(num, 10));\n        const rangeSize = end - start + 1;\n        const pctRangeSize = Math.ceil(rangeSize / unit.pctCardCount);\n        const pctStart = start + i * pctRangeSize;\n        const pctEnd = Math.min(pctStart + pctRangeSize - 1, end);\n        pctsData.push({\n            unitId: unit.id,\n            name: \"PCT \".concat(i + 1),\n            spectraNumber: \"PCT\".concat(10000 + i),\n            reliefName: \"\",\n            roomRange: \"\".concat(pctStart, \"-\").concat(pctEnd)\n        });\n    }\n    // Generate staff data\n    if (unit.hasChargeNurse) {\n        staffData.push({\n            unitId: unit.id,\n            name: \"\",\n            spectraNumber: \"\",\n            role: \"chargeNurse\"\n        });\n    }\n    if (unit.hasUnitClerk) {\n        staffData.push({\n            unitId: unit.id,\n            name: \"\",\n            spectraNumber: \"\",\n            role: \"unitClerk\"\n        });\n    }\n    const [patients, nurses, pcts, staffMembers] = await Promise.all([\n        batchCreatePatients(patientsData),\n        batchCreateNurses(nursesData),\n        batchCreatePCTs(pctsData),\n        batchCreateStaffMembers(staffData)\n    ]);\n    // Process staff members\n    let chargeNurse = null;\n    let unitClerk = null;\n    for (const staff of staffMembers){\n        if (staff.role === \"chargeNurse\") {\n            chargeNurse = staff;\n        } else if (staff.role === \"unitClerk\") {\n            unitClerk = staff;\n        }\n    }\n    return {\n        patients,\n        nurses,\n        pcts,\n        chargeNurse,\n        unitClerk\n    };\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmlyZWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQzJEO0FBQ2lGO0FBK0U1SSxpQ0FBaUM7QUFDakMsTUFBTWMsdUJBQXVCViw4REFBVUEsQ0FBQ0gsZ0RBQUVBLEVBQUU7QUFDNUMsTUFBTWMsa0JBQWtCWCw4REFBVUEsQ0FBQ0gsZ0RBQUVBLEVBQUU7QUFDdkMsTUFBTWUscUJBQXFCWiw4REFBVUEsQ0FBQ0gsZ0RBQUVBLEVBQUU7QUFDMUMsTUFBTWdCLG1CQUFtQmIsOERBQVVBLENBQUNILGdEQUFFQSxFQUFFO0FBQ3hDLE1BQU1pQixpQkFBaUJkLDhEQUFVQSxDQUFDSCxnREFBRUEsRUFBRTtBQUN0QyxNQUFNa0Isa0JBQWtCZiw4REFBVUEsQ0FBQ0gsZ0RBQUVBLEVBQUU7QUFDdkMsTUFBTW1CLG9CQUFvQmhCLDhEQUFVQSxDQUFDSCxnREFBRUEsRUFBRTtBQUV6QyxRQUFRO0FBQ1IsSUFBSW9CLGtCQUFxQztBQUN6QyxJQUFJQyxhQUFrQyxJQUFJQztBQUMxQyxJQUFJQyxnQkFPQyxJQUFJRDtBQUVULHFCQUFxQjtBQUNkLGVBQWVFLGVBQWVDLFlBQWdEO0lBQ25GLE1BQU1DLFlBQVlDLEtBQUtDLEdBQUc7SUFDMUIsTUFBTUMsY0FBY3pCLHVEQUFHQSxDQUFDUztJQUN4QixNQUFNaUIsY0FBd0I7UUFDNUJDLElBQUlGLFlBQVlFLEVBQUU7UUFDbEIsR0FBR04sWUFBWTtRQUNmTyxXQUFXTjtJQUNiO0lBQ0EsTUFBTXJCLDBEQUFNQSxDQUFDd0IsYUFBYUM7SUFFMUIsSUFBSVYsaUJBQWlCO1FBQ25CQSxnQkFBZ0JhLElBQUksQ0FBQ0g7SUFDdkIsT0FBTztRQUNMLHNFQUFzRTtRQUN0RSw4Q0FBOEM7UUFDOUNWLGtCQUFrQjtRQUNsQixNQUFNYztJQUNSO0lBRUEsT0FBT0o7QUFDVDtBQUVPLGVBQWVJO0lBQ3BCLElB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ZTtZQUNoQ3ZDLGNBQWNvRztRQUNoQixPQUFPLElBQUlBLE1BQU03RCxJQUFJLEtBQUssYUFBYTtZQUNyQ3RDLFlBQVltRztRQUNkO0lBQ0Y7SUFFQSxPQUFPO1FBQ0wvRztRQUNBUztRQUNBQztRQUNBQztRQUNBQztJQUNGO0FBQ0Y7QUFDa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9maXJlYmFzZS50cz8xNTQwIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgYXBwLCBkYiwgc3RvcmFnZSwgYXV0aCB9IGZyb20gJy4vZmlyZWJhc2UtY29uZmlnJztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGRvYywgc2V0RG9jLCBnZXREb2MsIGdldERvY3MsIHVwZGF0ZURvYywgZGVsZXRlRG9jLCBxdWVyeSwgd2hlcmUsIERvY3VtZW50RGF0YSwgd3JpdGVCYXRjaCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbi8vIEZhY2lsaXR5IFR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIEZhY2lsaXR5IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjcmVhdGVkQXQ/OiBudW1iZXI7XG59XG5cbi8vIFVuaXQgVHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgVW5pdCB7XG4gIGlkOiBzdHJpbmc7XG4gIGZhY2lsaXR5SWQ6IHN0cmluZztcbiAgZGVzaWduYXRpb246IHN0cmluZztcbiAgcm9vbUNvdW50OiBudW1iZXI7XG4gIHJvb21SYW5nZXM6IHN0cmluZ1tdO1xuICBudXJzZUNhcmRDb3VudDogbnVtYmVyO1xuICBwY3RDYXJkQ291bnQ6IG51bWJlcjtcbiAgaGFzQ2hhcmdlTnVyc2U6IGJvb2xlYW47XG4gIGhhc1VuaXRDbGVyazogYm9vbGVhbjtcbiAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICB1cGRhdGVkQXQ/OiBudW1iZXI7XG59XG5cbi8vIFBhdGllbnQgVHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgUGF0aWVudCB7XG4gIGlkOiBzdHJpbmc7XG4gIHVuaXRJZDogc3RyaW5nO1xuICByb29tTnVtYmVyOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYWN1aXR5OiBudW1iZXI7XG4gIGFzc2lnbmVkOiBib29sZWFuO1xuICBub3Rlcz86IHN0cmluZztcbiAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICB1cGRhdGVkQXQ/OiBudW1iZXI7XG59XG5cbi8vIFN0YWZmIFR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIE51cnNlIHtcbiAgaWQ6IHN0cmluZztcbiAgdW5pdElkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3BlY3RyYU51bWJlcjogc3RyaW5nO1xuICByZWxpZWZOYW1lOiBzdHJpbmc7XG4gIGFzc2lnbmVkUm9vbXM6IHN0cmluZ1tdO1xuICBhY3VpdHlDYXBhY2l0eTogbnVtYmVyO1xuICBjcmVhdGVkQXQ/OiBudW1iZXI7XG4gIHVwZGF0ZWRBdD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQQ1Qge1xuICBpZDogc3RyaW5nO1xuICB1bml0SWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzcGVjdHJhTnVtYmVyOiBzdHJpbmc7XG4gIHJlbGllZk5hbWU6IHN0cmluZztcbiAgcm9vbVJhbmdlOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdD86IG51bWJlcjtcbiAgdXBkYXRlZEF0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YWZmTWVtYmVyIHtcbiAgaWQ6IHN0cmluZztcbiAgdW5pdElkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3BlY3RyYU51bWJlcjogc3RyaW5nO1xuICByb2xlOiAnY2hhcmdlTnVyc2UnIHwgJ3VuaXRDbGVyayc7XG4gIGNyZWF0ZWRBdD86IG51bWJlcjtcbiAgdXBkYXRlZEF0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgdXBkYXRlZEF0PzogbnVtYmVyO1xufVxuXG4vLyBGaXJlYmFzZSBDb2xsZWN0aW9uIFJlZmVyZW5jZXNcbmNvbnN0IGZhY2lsaXRpZXNDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgJ2ZhY2lsaXRpZXMnKTtcbmNvbnN0IHVuaXRzQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24oZGIsICd1bml0cycpO1xuY29uc3QgcGF0aWVudHNDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgJ3BhdGllbnRzJyk7XG5jb25zdCBudXJzZXNDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgJ251cnNlcycpO1xuY29uc3QgcGN0c0NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uKGRiLCAncGN0cycpO1xuY29uc3Qgc3RhZmZDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgJ3N0YWZmJyk7XG5jb25zdCBtb2R1bGVzQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24oZGIsICdtb2R1bGVzJyk7XG5cbi8vIENhY2hlXG5sZXQgZmFjaWxpdGllc0NhY2hlOiBGYWNpbGl0eVtdIHwgbnVsbCA9IG51bGw7XG5sZXQgdW5pdHNDYWNoZTogTWFwPHN0cmluZywgVW5pdFtdPiA9IG5ldyBNYXAoKTtcbmxldCB1bml0RGF0YUNhY2hlOiBNYXA8c3RyaW5nLCB7XG4gIHVuaXQ6IFVuaXQgfCBudWxsLFxuICBwYXRpZW50czogUGF0aWVudFtdLFxuICBudXJzZXM6IE51cnNlW10sXG4gIHBjdHM6IFBDVFtdLFxuICBjaGFyZ2VOdXJzZTogU3RhZmZNZW1iZXIgfCBudWxsLFxuICB1bml0Q2xlcms6IFN0YWZmTWVtYmVyIHwgbnVsbFxufT4gPSBuZXcgTWFwKCk7XG5cbi8vIEZhY2lsaXR5IEZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZhY2lsaXR5KGZhY2lsaXR5RGF0YTogT21pdDxGYWNpbGl0eSwgJ2lkJyB8ICdjcmVhdGVkQXQnPik6IFByb21pc2U8RmFjaWxpdHk+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgZmFjaWxpdHlSZWYgPSBkb2MoZmFjaWxpdGllc0NvbGxlY3Rpb24pO1xuICBjb25zdCBuZXdGYWNpbGl0eTogRmFjaWxpdHkgPSB7XG4gICAgaWQ6IGZhY2lsaXR5UmVmLmlkLFxuICAgIC4uLmZhY2lsaXR5RGF0YSxcbiAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgfTtcbiAgYXdhaXQgc2V0RG9jKGZhY2lsaXR5UmVmLCBuZXdGYWNpbGl0eSk7XG4gIFxuICBpZiAoZmFjaWxpdGllc0NhY2hlKSB7XG4gICAgZmFjaWxpdGllc0NhY2hlLnB1c2gobmV3RmFjaWxpdHkpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIGNhY2hlIHdhc24ndCBpbml0aWFsaXplZCwgZmV0Y2ggaXQgYWdhaW4gdG8gaW5jbHVkZSB0aGUgbmV3IG9uZS5cbiAgICAvLyBUaGlzIGlzIGEgc2ltcGxlIHdheSB0byBlbnN1cmUgY29uc2lzdGVuY3kuXG4gICAgZmFjaWxpdGllc0NhY2hlID0gbnVsbDsgXG4gICAgYXdhaXQgZ2V0RmFjaWxpdGllcygpO1xuICB9XG4gIFxuICByZXR1cm4gbmV3RmFjaWxpdHk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGYWNpbGl0aWVzKCk6IFByb21pc2U8RmFjaWxpdHlbXT4ge1xuICBpZiAoZmFjaWxpdGllc0NhY2hlKSB7XG4gICAgcmV0dXJuIGZhY2lsaXRpZXNDYWNoZTtcbiAgfVxuICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoZmFjaWxpdGllc0NvbGxlY3Rpb24pO1xuICBjb25zdCBmYWNpbGl0aWVzID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBGYWNpbGl0eSkpO1xuICBmYWNpbGl0aWVzQ2FjaGUgPSBmYWNpbGl0aWVzO1xuICByZXR1cm4gZmFjaWxpdGllcztcbn1cblxuXG4vLyBVbml0IEZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVuaXQodW5pdERhdGE6IE9taXQ8VW5pdCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxVbml0PiB7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IHVuaXRSZWYgPSBkb2ModW5pdHNDb2xsZWN0aW9uKTtcbiAgY29uc3QgbmV3VW5pdDogVW5pdCA9IHtcbiAgICAuLi51bml0RGF0YSxcbiAgICBpZDogdW5pdFJlZi5pZCxcbiAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcFxuICB9O1xuICBcbiAgYXdhaXQgc2V0RG9jKHVuaXRSZWYsIG5ld1VuaXQpO1xuICBcbiAgLy8gU2FmZWx5IHVwZGF0ZSBjYWNoZVxuICBjb25zdCBmYWNpbGl0eVVuaXRzID0gdW5pdHNDYWNoZS5nZXQobmV3VW5pdC5mYWNpbGl0eUlkKSB8fCBbXTtcbiAgdW5pdHNDYWNoZS5zZXQobmV3VW5pdC5mYWNpbGl0eUlkLCBbLi4uZmFjaWxpdHlVbml0cywgbmV3VW5pdF0pO1xuICBcbiAgcmV0dXJuIG5ld1VuaXQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVbml0cyhmYWNpbGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPFVuaXRbXT4ge1xuICBpZiAoIWZhY2lsaXR5SWQpIHJldHVybiBbXTtcblxuICAvLyBSZXR1cm4gZnJvbSBjYWNoZSBpZiBhdmFpbGFibGVcbiAgaWYgKHVuaXRzQ2FjaGUuaGFzKGZhY2lsaXR5SWQpKSB7XG4gICAgcmV0dXJuIHVuaXRzQ2FjaGUuZ2V0KGZhY2lsaXR5SWQpITtcbiAgfVxuICBcbiAgY29uc3QgcSA9IHF1ZXJ5KHVuaXRzQ29sbGVjdGlvbiwgd2hlcmUoJ2ZhY2lsaXR5SWQnLCAnPT0nLCBmYWNpbGl0eUlkKSk7XG4gIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgY29uc3QgdW5pdHMgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgIHJldHVybiB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBVbml0O1xuICB9KTtcblxuICB1bml0c0NhY2hlLnNldChmYWNpbGl0eUlkLCB1bml0cyk7XG4gIHJldHVybiB1bml0cztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaXQodW5pdElkOiBzdHJpbmcpOiBQcm9taXNlPFVuaXQgfCBudWxsPiB7XG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0OiBpdGVyYXRlIHRocm91Z2ggYWxsIGZhY2lsaXRpZXMgaW4gdW5pdHNDYWNoZVxuICBmb3IgKGNvbnN0IGZhY2lsaXR5VW5pdHMgb2YgdW5pdHNDYWNoZS52YWx1ZXMoKSkge1xuICAgIGNvbnN0IGZvdW5kID0gZmFjaWxpdHlVbml0cy5maW5kKHUgPT4gdS5pZCA9PT0gdW5pdElkKTtcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHVuaXRSZWYgPSBkb2ModW5pdHNDb2xsZWN0aW9uLCB1bml0SWQpO1xuICBjb25zdCB1bml0U25hcCA9IGF3YWl0IGdldERvYyh1bml0UmVmKTtcbiAgXG4gIGlmICh1bml0U25hcC5leGlzdHMoKSkge1xuICAgIGNvbnN0IHVuaXQgPSB7IGlkOiB1bml0U25hcC5pZCwgLi4udW5pdFNuYXAuZGF0YSgpIH0gYXMgVW5pdDtcbiAgICAvLyBQcmUtd2FybSB0aGUgY2FjaGUgaWYgaXQgZG9lc24ndCBleGlzdCBmb3IgdGhhdCBmYWNpbGl0eVxuICAgIGlmICghdW5pdHNDYWNoZS5oYXModW5pdC5mYWNpbGl0eUlkKSkge1xuICAgICAgYXdhaXQgZ2V0VW5pdHModW5pdC5mYWNpbGl0eUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuaXQ7XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVW5pdCh1bml0SWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxVbml0Pik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1bml0UmVmID0gZG9jKHVuaXRzQ29sbGVjdGlvbiwgdW5pdElkKTtcbiAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAuLi5kYXRhLFxuICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICB9O1xuICBcbiAgYXdhaXQgdXBkYXRlRG9jKHVuaXRSZWYsIHVwZGF0ZURhdGEpO1xuICBcbiAgLy8gVXBkYXRlIGNhY2hlXG4gIHVuaXRzQ2FjaGUuZm9yRWFjaCgodW5pdHMsIGZhY2lsaXR5SWQpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IHVuaXRzLmZpbmRJbmRleCh1ID0+IHUuaWQgPT09IHVuaXRJZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc3QgdXBkYXRlZFVuaXRzID0gWy4uLnVuaXRzXTtcbiAgICAgIHVwZGF0ZWRVbml0c1tpbmRleF0gPSB7IC4uLnVwZGF0ZWRVbml0c1tpbmRleF0sIC4uLnVwZGF0ZURhdGEgfTtcbiAgICAgIHVuaXRzQ2FjaGUuc2V0KGZhY2lsaXR5SWQsIHVwZGF0ZWRVbml0cyk7XG4gICAgfVxuICB9KTtcblxuICBpZiAodW5pdERhdGFDYWNoZS5oYXModW5pdElkKSAmJiB1bml0RGF0YUNhY2hlLmdldCh1bml0SWQpIS51bml0KSB7XG4gICAgdW5pdERhdGFDYWNoZS5nZXQodW5pdElkKSEudW5pdCA9IHsgXG4gICAgICAuLi51bml0RGF0YUNhY2hlLmdldCh1bml0SWQpIS51bml0ISwgXG4gICAgICAuLi51cGRhdGVEYXRhIFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVuaXQodW5pdElkOiBzdHJpbmcsIGZhY2lsaXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1bml0UmVmID0gZG9jKHVuaXRzQ29sbGVjdGlvbiwgdW5pdElkKTtcbiAgYXdhaXQgZGVsZXRlRG9jKHVuaXRSZWYpO1xuICBcbiAgLy8gRGVsZXRlIHJlbGF0ZWQgZGF0YVxuICBhd2FpdCBkZWxldGVVbml0UGF0aWVudHModW5pdElkKTtcbiAgYXdhaXQgZGVsZXRlVW5pdE51cnNlcyh1bml0SWQpO1xuICBhd2FpdCBkZWxldGVVbml0UENUcyh1bml0SWQpO1xuICBhd2FpdCBkZWxldGVVbml0U3RhZmYodW5pdElkKTtcbiAgXG4gIC8vIFVwZGF0ZSBjYWNoZVxuICBjb25zdCBmYWNpbGl0eVVuaXRzID0gdW5pdHNDYWNoZS5nZXQoZmFjaWxpdHlJZCkgfHwgW107XG4gIHVuaXRzQ2FjaGUuc2V0KGZhY2lsaXR5SWQsIGZhY2lsaXR5VW5pdHMuZmlsdGVyKHUgPT4gdS5pZCAhPT0gdW5pdElkKSk7XG4gIHVuaXREYXRhQ2FjaGUuZGVsZXRlKHVuaXRJZCk7XG59XG5cbi8vIFBhdGllbnQgRnVuY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGF0aWVudChwYXRpZW50RGF0YTogT21pdDxQYXRpZW50LCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pOiBQcm9taXNlPFBhdGllbnQ+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgcGF0aWVudFJlZiA9IGRvYyhwYXRpZW50c0NvbGxlY3Rpb24pO1xuICBjb25zdCBuZXdQYXRpZW50OiBQYXRpZW50ID0ge1xuICAgIC4uLnBhdGllbnREYXRhLFxuICAgIGlkOiBwYXRpZW50UmVmLmlkLFxuICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wLFxuICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wXG4gIH07XG4gIFxuICBhd2FpdCBzZXREb2MocGF0aWVudFJlZiwgbmV3UGF0aWVudCk7XG4gIFxuICAvLyBVcGRhdGUgY2FjaGVcbiAgaWYgKHVuaXREYXRhQ2FjaGUuaGFzKHBhdGllbnREYXRhLnVuaXRJZCkpIHtcbiAgICB1bml0RGF0YUNhY2hlLmdldChwYXRpZW50RGF0YS51bml0SWQpIS5wYXRpZW50cy5wdXNoKG5ld1BhdGllbnQpO1xuICB9XG4gIFxuICByZXR1cm4gbmV3UGF0aWVudDtcbn1cblxuLy8gQmF0Y2ggY3JlYXRlIHBhdGllbnRzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXRjaENyZWF0ZVBhdGllbnRzKHBhdGllbnRzRGF0YTogT21pdDxQYXRpZW50LCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSk6IFByb21pc2U8UGF0aWVudFtdPiB7XG5cbiAgaWYgKHBhdGllbnRzRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICBjb25zdCBuZXdQYXRpZW50czogUGF0aWVudFtdID0gW107XG4gIFxuICBmb3IgKGNvbnN0IHBhdGllbnREYXRhIG9mIHBhdGllbnRzRGF0YSkge1xuICAgIGNvbnN0IHBhdGllbnRSZWYgPSBkb2MocGF0aWVudHNDb2xsZWN0aW9uKTtcbiAgICBjb25zdCBuZXdQYXRpZW50OiBQYXRpZW50ID0ge1xuICAgICAgLi4ucGF0aWVudERhdGEsXG4gICAgICBpZDogcGF0aWVudFJlZi5pZCxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXBcbiAgICB9O1xuICAgIFxuICAgIGJhdGNoLnNldChwYXRpZW50UmVmLCBuZXdQYXRpZW50KTtcbiAgICBuZXdQYXRpZW50cy5wdXNoKG5ld1BhdGllbnQpO1xuXG4gIH1cbiAgXG4gIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICByZXR1cm4gbmV3UGF0aWVudHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXRpZW50c0J5VW5pdCh1bml0SWQ6IHN0cmluZyk6IFByb21pc2U8UGF0aWVudFtdPiB7XG4gIGlmICghdW5pdElkKSByZXR1cm4gW107XG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gIGNvbnN0IGNhY2hlZERhdGEgPSB1bml0RGF0YUNhY2hlLmdldCh1bml0SWQpO1xuICBpZiAoY2FjaGVkRGF0YT8ucGF0aWVudHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjYWNoZWREYXRhLnBhdGllbnRzO1xuICB9XG4gIFxuICBjb25zdCBxID0gcXVlcnkocGF0aWVudHNDb2xsZWN0aW9uLCB3aGVyZSgndW5pdElkJywgJz09JywgdW5pdElkKSk7XG4gIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgY29uc3QgcGF0aWVudHMgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgIHJldHVybiB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBQYXRpZW50O1xuICB9KTtcblxuICBpZiAodW5pdERhdGFDYWNoZS5oYXModW5pdElkKSkge1xuICAgIHVuaXREYXRhQ2FjaGUuZ2V0KHVuaXRJZCkhLnBhdGllbnRzID0gcGF0aWVudHM7XG4gIH0gZWxzZSB7XG4gICAgdW5pdERhdGFDYWNoZS5zZXQodW5pdElkLCB7IHVuaXQ6IG51bGwsIHBhdGllbnRzLCBudXJzZXM6IFtdLCBwY3RzOiBbXSwgY2hhcmdlTnVyc2U6IG51bGwsIHVuaXRDbGVyazogbnVsbCB9KTtcbiAgfVxuICByZXR1cm4gcGF0aWVudHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQYXRpZW50KHBhdGllbnRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFBhdGllbnQ+KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHBhdGllbnRSZWYgPSBkb2MocGF0aWVudHNDb2xsZWN0aW9uLCBwYXRpZW50SWQpO1xuICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgIC4uLmRhdGEsXG4gICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gIH07XG4gIFxuICBhd2FpdCB1cGRhdGVEb2MocGF0aWVudFJlZiwgdXBkYXRlRGF0YSk7XG4gIFxuICAvLyBVcGRhdGUgY2FjaGVcbiAgZm9yIChjb25zdCBbdW5pdElkLCBjYWNoZWREYXRhXSBvZiB1bml0RGF0YUNhY2hlLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IGluZGV4ID0gY2FjaGVkRGF0YS5wYXRpZW50cy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBwYXRpZW50SWQpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGNhY2hlZERhdGEucGF0aWVudHNbaW5kZXhdID0geyAuLi5jYWNoZWREYXRhLnBhdGllbnRzW2luZGV4XSwgLi4udXBkYXRlRGF0YSB9O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbi8vIEJhdGNoIHVwZGF0ZSBwYXRpZW50cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmF0Y2hVcGRhdGVQYXRpZW50cyh1cGRhdGVzOiB7IGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8UGF0aWVudD4gfVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIFxuICBmb3IgKGNvbnN0IHsgaWQsIGRhdGEgfSBvZiB1cGRhdGVzKSB7XG4gICAgY29uc3QgcGF0aWVudFJlZiA9IGRvYyhwYXRpZW50c0NvbGxlY3Rpb24sIGlkKTtcbiAgICBiYXRjaC51cGRhdGUocGF0aWVudFJlZiwgeyAuLi5kYXRhLCB1cGRhdGVkQXQ6IHRpbWVzdGFtcCB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICBmb3IgKGNvbnN0IFt1bml0SWQsIGNhY2hlZERhdGFdIG9mIHVuaXREYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGNhY2hlZERhdGEucGF0aWVudHMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gaWQpO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBjYWNoZWREYXRhLnBhdGllbnRzW2luZGV4XSA9IHsgXG4gICAgICAgICAgLi4uY2FjaGVkRGF0YS5wYXRpZW50c1tpbmRleF0sIFxuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXBcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBhdGllbnQocGF0aWVudElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgcGF0aWVudFJlZiA9IGRvYyhwYXRpZW50c0NvbGxlY3Rpb24sIHBhdGllbnRJZCk7XG4gIGF3YWl0IGRlbGV0ZURvYyhwYXRpZW50UmVmKTtcbiAgXG4gIC8vIFVwZGF0ZSBjYWNoZVxuICBmb3IgKGNvbnN0IFt1bml0SWQsIGNhY2hlZERhdGFdIG9mIHVuaXREYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgY2FjaGVkRGF0YS5wYXRpZW50cyA9IGNhY2hlZERhdGEucGF0aWVudHMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gcGF0aWVudElkKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVW5pdFBhdGllbnRzKHVuaXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdW5pdElkKSByZXR1cm47XG4gIGNvbnN0IHEgPSBxdWVyeShwYXRpZW50c0NvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBpZiAoc25hcHNob3QuZW1wdHkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gIHNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcbiAgfSk7XG4gIFxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbn1cblxuLy8gTnVyc2UgRnVuY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTnVyc2UobnVyc2VEYXRhOiBPbWl0PE51cnNlLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pOiBQcm9taXNlPE51cnNlPiB7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IG51cnNlUmVmID0gZG9jKG51cnNlc0NvbGxlY3Rpb24pO1xuICBjb25zdCBuZXdOdXJzZTogTnVyc2UgPSB7XG4gICAgLi4ubnVyc2VEYXRhLFxuICAgIGlkOiBudXJzZVJlZi5pZCxcbiAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcFxuICB9O1xuICBcbiAgYXdhaXQgc2V0RG9jKG51cnNlUmVmLCBuZXdOdXJzZSk7XG4gIFxuICAvLyBVcGRhdGUgY2FjaGVcbiAgaWYgKHVuaXREYXRhQ2FjaGUuaGFzKG51cnNlRGF0YS51bml0SWQpKSB7XG4gICAgdW5pdERhdGFDYWNoZS5nZXQobnVyc2VEYXRhLnVuaXRJZCkhLm51cnNlcy5wdXNoKG5ld051cnNlKTtcbiAgfVxuICBcbiAgcmV0dXJuIG5ld051cnNlO1xufVxuXG4vLyBCYXRjaCBjcmVhdGUgbnVyc2VzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXRjaENyZWF0ZU51cnNlcyhudXJzZXNEYXRhOiBPbWl0PE51cnNlLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSk6IFByb21pc2U8TnVyc2VbXT4ge1xuICBpZiAobnVyc2VzRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICBjb25zdCBuZXdOdXJzZXM6IE51cnNlW10gPSBbXTtcbiAgXG4gIGZvciAoY29uc3QgbnVyc2VEYXRhIG9mIG51cnNlc0RhdGEpIHtcbiAgICBjb25zdCBudXJzZVJlZiA9IGRvYyhudXJzZXNDb2xsZWN0aW9uKTtcbiAgICBjb25zdCBuZXdOdXJzZTogTnVyc2UgPSB7XG4gICAgICAuLi5udXJzZURhdGEsXG4gICAgICBpZDogbnVyc2VSZWYuaWQsXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wXG4gICAgfTtcbiAgICBcbiAgICBiYXRjaC5zZXQobnVyc2VSZWYsIG5ld051cnNlKTtcbiAgICBuZXdOdXJzZXMucHVzaChuZXdOdXJzZSk7XG5cbiAgfVxuICBcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gIHJldHVybiBuZXdOdXJzZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROdXJzZXNCeVVuaXQodW5pdElkOiBzdHJpbmcpOiBQcm9taXNlPE51cnNlW10+IHtcbiAgaWYgKCF1bml0SWQpIHJldHVybiBbXTtcbiAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVkRGF0YSA9IHVuaXREYXRhQ2FjaGUuZ2V0KHVuaXRJZCk7XG4gIGlmIChjYWNoZWREYXRhPy5udXJzZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjYWNoZWREYXRhLm51cnNlcztcbiAgfVxuICBcbiAgY29uc3QgcSA9IHF1ZXJ5KG51cnNlc0NvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBjb25zdCBudXJzZXMgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgIHJldHVybiB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBOdXJzZTtcbiAgfSk7XG5cbiAgaWYgKHVuaXREYXRhQ2FjaGUuaGFzKHVuaXRJZCkpIHtcbiAgICB1bml0RGF0YUNhY2hlLmdldCh1bml0SWQpIS5udXJzZXMgPSBudXJzZXM7XG4gIH0gZWxzZSB7XG4gICAgdW5pdERhdGFDYWNoZS5zZXQodW5pdElkLCB7IHVuaXQ6IG51bGwsIHBhdGllbnRzOiBbXSwgbnVyc2VzLCBwY3RzOiBbXSwgY2hhcmdlTnVyc2U6IG51bGwsIHVuaXRDbGVyazogbnVsbCB9KTtcbiAgfVxuICByZXR1cm4gbnVyc2VzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTnVyc2UobnVyc2VJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE51cnNlPik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBudXJzZVJlZiA9IGRvYyhudXJzZXNDb2xsZWN0aW9uLCBudXJzZUlkKTtcbiAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAuLi5kYXRhLFxuICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICB9O1xuICBcbiAgYXdhaXQgdXBkYXRlRG9jKG51cnNlUmVmLCB1cGRhdGVEYXRhKTtcbiAgXG4gIC8vIFVwZGF0ZSBjYWNoZVxuICBmb3IgKGNvbnN0IFt1bml0SWQsIGNhY2hlZERhdGFdIG9mIHVuaXREYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgY29uc3QgaW5kZXggPSBjYWNoZWREYXRhLm51cnNlcy5maW5kSW5kZXgobiA9PiBuLmlkID09PSBudXJzZUlkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBjYWNoZWREYXRhLm51cnNlc1tpbmRleF0gPSB7IC4uLmNhY2hlZERhdGEubnVyc2VzW2luZGV4XSwgLi4udXBkYXRlRGF0YSB9O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVOdXJzZShudXJzZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbnVyc2VSZWYgPSBkb2MobnVyc2VzQ29sbGVjdGlvbiwgbnVyc2VJZCk7XG4gIGF3YWl0IGRlbGV0ZURvYyhudXJzZVJlZik7XG4gIFxuICAvLyBVcGRhdGUgY2FjaGVcbiAgZm9yIChjb25zdCBbdW5pdElkLCBjYWNoZWREYXRhXSBvZiB1bml0RGF0YUNhY2hlLmVudHJpZXMoKSkge1xuICAgIGNhY2hlZERhdGEubnVyc2VzID0gY2FjaGVkRGF0YS5udXJzZXMuZmlsdGVyKG4gPT4gbi5pZCAhPT0gbnVyc2VJZCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVuaXROdXJzZXModW5pdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCF1bml0SWQpIHJldHVybjtcbiAgY29uc3QgIHEgPSBxdWVyeShudXJzZXNDb2xsZWN0aW9uLCB3aGVyZSgndW5pdElkJywgJz09JywgdW5pdElkKSk7XG4gIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTsgICAgXG4gIGlmIChzbmFwc2hvdC5lbXB0eSkge1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgc25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xuICB9KTtcbiAgXG4gIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xufVxuXG4vLyBQQ1QgRnVuY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUENUKHBjdERhdGE6IE9taXQ8UENULCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pOiBQcm9taXNlPFBDVD4ge1xuICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICBjb25zdCBwY3RSZWYgPSBkb2MocGN0c0NvbGxlY3Rpb24pO1xuICBjb25zdCBuZXdQQ1Q6IFBDVCA9IHtcbiAgICAuLi5wY3REYXRhLFxuICAgIGlkOiBwY3RSZWYuaWQsXG4gICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAsXG4gICAgdXBkYXRlZEF0OiB0aW1lc3RhbXBcbiAgfTtcbiAgXG4gIGF3YWl0IHNldERvYyhwY3RSZWYsIG5ld1BDVCk7XG4gIFxuICAvLyBVcGRhdGUgY2FjaGVcbiAgaWYgKHVuaXREYXRhQ2FjaGUuaGFzKHBjdERhdGEudW5pdElkKSkge1xuICAgIHVuaXREYXRhQ2FjaGUuZ2V0KHBjdERhdGEudW5pdElkKSEucGN0cy5wdXNoKG5ld1BDVCk7XG4gIH1cbiAgXG4gIHJldHVybiBuZXdQQ1Q7XG59XG5cbi8vIEJhdGNoIGNyZWF0ZSBQQ1RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXRjaENyZWF0ZVBDVHMocGN0c0RhdGE6IE9taXQ8UENULCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSk6IFByb21pc2U8UENUW10+IHtcblxuICBpZiAocGN0c0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIFxuICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICBjb25zdCBuZXdQQ1RzOiBQQ1RbXSA9IFtdO1xuICBcbiAgZm9yIChjb25zdCBwY3REYXRhIG9mIHBjdHNEYXRhKSB7XG4gICAgY29uc3QgcGN0UmVmID0gZG9jKHBjdHNDb2xsZWN0aW9uKTtcbiAgICBjb25zdCBuZXdQQ1Q6IFBDVCA9IHtcbiAgICAgIC4uLnBjdERhdGEsXG4gICAgICBpZDogcGN0UmVmLmlkLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAsXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcFxuICAgIH07XG4gICAgXG4gICAgYmF0Y2guc2V0KHBjdFJlZiwgbmV3UENUKTtcbiAgICBuZXdQQ1RzLnB1c2gobmV3UENUKTtcbiAgfVxuICBcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gIHJldHVybiBuZXdQQ1RzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UENUc0J5VW5pdCh1bml0SWQ6IHN0cmluZyk6IFByb21pc2U8UENUW10+IHtcbiAgaWYgKCF1bml0SWQpIHJldHVybiBbXTtcbiAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVkRGF0YSA9IHVuaXREYXRhQ2FjaGUuZ2V0KHVuaXRJZCk7XG4gIGlmIChjYWNoZWREYXRhPy5wY3RzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gY2FjaGVkRGF0YS5wY3RzO1xuICB9XG4gIFxuICBjb25zdCBxID0gcXVlcnkocGN0c0NvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBjb25zdCBwY3RzID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+IHtcbiAgICByZXR1cm4geyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0gYXMgUENUO1xuICB9KTtcblxuICBpZiAodW5pdERhdGFDYWNoZS5oYXModW5pdElkKSkge1xuICAgIHVuaXREYXRhQ2FjaGUuZ2V0KHVuaXRJZCkhLnBjdHMgPSBwY3RzO1xuICB9IGVsc2Uge1xuICAgIHVuaXREYXRhQ2FjaGUuc2V0KHVuaXRJZCwgeyB1bml0OiBudWxsLCBwYXRpZW50czogW10sIG51cnNlczogW10sIHBjdHMsIGNoYXJnZU51cnNlOiBudWxsLCB1bml0Q2xlcms6IG51bGwgfSk7XG4gIH1cbiAgcmV0dXJuIHBjdHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQQ1QocGN0SWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxQQ1Q+KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHBjdFJlZiA9IGRvYyhwY3RzQ29sbGVjdGlvbiwgcGN0SWQpO1xuICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgIC4uLmRhdGEsXG4gICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gIH07XG4gIFxuICBhd2FpdCB1cGRhdGVEb2MocGN0UmVmLCB1cGRhdGVEYXRhKTtcbiAgXG4gIC8vIFVwZGF0ZSBjYWNoZVxuICBmb3IgKGNvbnN0IFt1bml0SWQsIGNhY2hlZERhdGFdIG9mIHVuaXREYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgY29uc3QgaW5kZXggPSBjYWNoZWREYXRhLnBjdHMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gcGN0SWQpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGNhY2hlZERhdGEucGN0c1tpbmRleF0gPSB7IC4uLmNhY2hlZERhdGEucGN0c1tpbmRleF0sIC4uLnVwZGF0ZURhdGEgfTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUENUKHBjdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgcGN0UmVmID0gZG9jKHBjdHNDb2xsZWN0aW9uLCBwY3RJZCk7XG4gIGF3YWl0IGRlbGV0ZURvYyhwY3RSZWYpO1xuICBcbiAgLy8gVXBkYXRlIGNhY2hlXG4gIGZvciAoY29uc3QgW3VuaXRJZCwgY2FjaGVkRGF0YV0gb2YgdW5pdERhdGFDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICBjYWNoZWREYXRhLnBjdHMgPSBjYWNoZWREYXRhLnBjdHMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gcGN0SWQpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVVbml0UENUcyh1bml0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVuaXRJZCkgcmV0dXJuO1xuICBjb25zdCBxID0gcXVlcnkocGN0c0NvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgc25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xuICB9KTtcbiAgXG4gIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xufVxuXG4vLyBTdGFmZiBGdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTdGFmZk1lbWJlcihzdGFmZkRhdGE6IE9taXQ8U3RhZmZNZW1iZXIsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8U3RhZmZNZW1iZXI+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qgc3RhZmZSZWYgPSBkb2Moc3RhZmZDb2xsZWN0aW9uKTtcbiAgY29uc3QgbmV3U3RhZmY6IFN0YWZmTWVtYmVyID0ge1xuICAgIC4uLnN0YWZmRGF0YSxcbiAgICBpZDogc3RhZmZSZWYuaWQsXG4gICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAsXG4gICAgdXBkYXRlZEF0OiB0aW1lc3RhbXBcbiAgfTtcbiAgXG4gIGF3YWl0IHNldERvYyhzdGFmZlJlZiwgbmV3U3RhZmYpO1xuICBcbiAgLy8gVXBkYXRlIGNhY2hlXG4gIGlmICh1bml0RGF0YUNhY2hlLmhhcyhzdGFmZkRhdGEudW5pdElkKSkge1xuICAgIGlmIChzdGFmZkRhdGEucm9sZSA9PT0gJ2NoYXJnZU51cnNlJykge1xuICAgICAgdW5pdERhdGFDYWNoZS5nZXQoc3RhZmZEYXRhLnVuaXRJZCkhLmNoYXJnZU51cnNlID0gbmV3U3RhZmY7XG4gICAgfSBlbHNlIGlmIChzdGFmZkRhdGEucm9sZSA9PT0gJ3VuaXRDbGVyaycpIHtcbiAgICAgIHVuaXREYXRhQ2FjaGUuZ2V0KHN0YWZmRGF0YS51bml0SWQpIS51bml0Q2xlcmsgPSBuZXdTdGFmZjtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBuZXdTdGFmZjtcbn1cblxuLy8gQmF0Y2ggY3JlYXRlIHN0YWZmIG1lbWJlcnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJhdGNoQ3JlYXRlU3RhZmZNZW1iZXJzKHN0YWZmRGF0YTogT21pdDxTdGFmZk1lbWJlciwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+W10pOiBQcm9taXNlPFN0YWZmTWVtYmVyW10+IHtcblxuICBpZiAoc3RhZmZEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gIGNvbnN0IG5ld1N0YWZmTWVtYmVyczogU3RhZmZNZW1iZXJbXSA9IFtdO1xuICBcbiAgZm9yIChjb25zdCBzdGFmZk1lbWJlckRhdGEgb2Ygc3RhZmZEYXRhKSB7XG4gICAgY29uc3Qgc3RhZmZSZWYgPSBkb2Moc3RhZmZDb2xsZWN0aW9uKTtcbiAgICBjb25zdCBuZXdTdGFmZjogU3RhZmZNZW1iZXIgPSB7XG4gICAgICAuLi5zdGFmZk1lbWJlckRhdGEsXG4gICAgICBpZDogc3RhZmZSZWYuaWQsXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wXG4gICAgfTtcbiAgICBcbiAgICBiYXRjaC5zZXQoc3RhZmZSZWYsIG5ld1N0YWZmKTtcbiAgICBuZXdTdGFmZk1lbWJlcnMucHVzaChuZXdTdGFmZik7XG5cbiAgfVxuICBcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gIHJldHVybiBuZXdTdGFmZk1lbWJlcnM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdGFmZkJ5VW5pdCh1bml0SWQ6IHN0cmluZyk6IFByb21pc2U8U3RhZmZNZW1iZXJbXT4ge1xuICBpZiAoIXVuaXRJZCkgcmV0dXJuIFtdO1xuICBjb25zdCBxID0gcXVlcnkoc3RhZmZDb2xsZWN0aW9uLCB3aGVyZSgndW5pdElkJywgJz09JywgdW5pdElkKSk7XG4gIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgcmV0dXJuIHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9IGFzIFN0YWZmTWVtYmVyO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0YWZmQnlVbml0QW5kUm9sZSh1bml0SWQ6IHN0cmluZywgcm9sZTogJ2NoYXJnZU51cnNlJyB8ICd1bml0Q2xlcmsnKTogUHJvbWlzZTxTdGFmZk1lbWJlciB8IG51bGw+IHtcbiAgaWYgKCF1bml0SWQpIHJldHVybiBudWxsO1xuICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICBjb25zdCBjYWNoZWREYXRhID0gdW5pdERhdGFDYWNoZS5nZXQodW5pdElkKTtcbiAgaWYgKHJvbGUgPT09ICdjaGFyZ2VOdXJzZScgJiYgY2FjaGVkRGF0YT8uY2hhcmdlTnVyc2UpIHtcbiAgICByZXR1cm4gY2FjaGVkRGF0YS5jaGFyZ2VOdXJzZTtcbiAgfSBlbHNlIGlmIChyb2xlID09PSAndW5pdENsZXJrJyAmJiBjYWNoZWREYXRhPy51bml0Q2xlcmspIHtcbiAgICByZXR1cm4gY2FjaGVkRGF0YS51bml0Q2xlcms7XG4gIH1cbiAgXG4gIGNvbnN0IHEgPSBxdWVyeShzdGFmZkNvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpLCB3aGVyZSgncm9sZScsICc9PScsIHJvbGUpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIGNvbnN0IHN0YWZmRGF0YSA9IHNuYXBzaG90LmRvY3NbMF0uZGF0YSgpO1xuICBjb25zdCBzdGFmZk1lbWJlciA9IHsgaWQ6IHNuYXBzaG90LmRvY3NbMF0uaWQsIC4uLnN0YWZmRGF0YSB9IGFzIFN0YWZmTWVtYmVyO1xuXG4gIGlmICh1bml0RGF0YUNhY2hlLmhhcyh1bml0SWQpKSB7XG4gICAgaWYgKHJvbGUgPT09ICdjaGFyZ2VOdXJzZScpIHtcbiAgICAgICAgdW5pdERhdGFDYWNoZS5nZXQodW5pdElkKSEuY2hhcmdlTnVyc2UgPSBzdGFmZk1lbWJlcjtcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICd1bml0Q2xlcmsnKSB7XG4gICAgICAgIHVuaXREYXRhQ2FjaGUuZ2V0KHVuaXRJZCkhLnVuaXRDbGVyayA9IHN0YWZmTWVtYmVyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIHVuaXREYXRhQ2FjaGUuc2V0KHVuaXRJZCwge1xuICAgICAgICAgIHVuaXQ6IG51bGwsXG4gICAgICAgICAgcGF0aWVudHM6IFtdLFxuICAgICAgICAgIG51cnNlczogW10sXG4gICAgICAgICAgcGN0czogW10sXG4gICAgICAgICAgY2hhcmdlTnVyc2U6IHJvbGUgPT09ICdjaGFyZ2VOdXJzZScgPyBzdGFmZk1lbWJlciA6IG51bGwsXG4gICAgICAgICAgdW5pdENsZXJrOiByb2xlID09PSAndW5pdENsZXJrJyA/IHN0YWZmTWVtYmVyIDogbnVsbFxuICAgICAgfSk7XG4gIH1cbiAgcmV0dXJuIHN0YWZmTWVtYmVyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3RhZmZNZW1iZXIoc3RhZmZJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFN0YWZmTWVtYmVyPik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdGFmZlJlZiA9IGRvYyhzdGFmZkNvbGxlY3Rpb24sIHN0YWZmSWQpO1xuICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgIC4uLmRhdGEsXG4gICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gIH07XG4gIFxuICBhd2FpdCB1cGRhdGVEb2Moc3RhZmZSZWYsIHVwZGF0ZURhdGEpO1xuICBcbiAgLy8gVXBkYXRlIGNhY2hlXG4gIGZvciAoY29uc3QgW3VuaXRJZCwgY2FjaGVkRGF0YV0gb2YgdW5pdERhdGFDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICBpZiAoY2FjaGVkRGF0YS5jaGFyZ2VOdXJzZT8uaWQgPT09IHN0YWZmSWQpIHtcbiAgICAgIGNhY2hlZERhdGEuY2hhcmdlTnVyc2UgPSB7IC4uLmNhY2hlZERhdGEuY2hhcmdlTnVyc2UsIC4uLnVwZGF0ZURhdGEgfTtcbiAgICB9IGVsc2UgaWYgKGNhY2hlZERhdGEudW5pdENsZXJrPy5pZCA9PT0gc3RhZmZJZCkge1xuICAgICAgY2FjaGVkRGF0YS51bml0Q2xlcmsgPSB7IC4uLmNhY2hlZERhdGEudW5pdENsZXJrLCAuLi51cGRhdGVEYXRhIH07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVTdGFmZk1lbWJlcihzdGFmZklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3RhZmZSZWYgPSBkb2Moc3RhZmZDb2xsZWN0aW9uLCBzdGFmZklkKTtcbiAgYXdhaXQgZGVsZXRlRG9jKHN0YWZmUmVmKTtcbiAgXG4gIC8vIFVwZGF0ZSBjYWNoZVxuICBmb3IgKGNvbnN0IFt1bml0SWQsIGNhY2hlZERhdGFdIG9mIHVuaXREYXRhQ2FjaGUuZW50cmllcygpKSB7XG4gICAgaWYgKGNhY2hlZERhdGEuY2hhcmdlTnVyc2U/LmlkID09PSBzdGFmZklkKSB7XG4gICAgICBjYWNoZWREYXRhLmNoYXJnZU51cnNlID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGNhY2hlZERhdGEudW5pdENsZXJrPy5pZCA9PT0gc3RhZmZJZCkge1xuICAgICAgY2FjaGVkRGF0YS51bml0Q2xlcmsgPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVW5pdFN0YWZmKHVuaXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdW5pdElkKSByZXR1cm47XG4gIGNvbnN0IHEgPSBxdWVyeShzdGFmZkNvbGxlY3Rpb24sIHdoZXJlKCd1bml0SWQnLCAnPT0nLCB1bml0SWQpKTtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICBzbmFwc2hvdC5kb2NzLmZvckVhY2goZG9jID0+IHtcbiAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XG4gIH0pO1xuICBcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG59XG5cbi8vIE1vZHVsZSBGdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb2R1bGVzKCk6IFByb21pc2U8TW9kdWxlW10+IHtcbiAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG1vZHVsZXNDb2xsZWN0aW9uKTtcbiAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgcmV0dXJuIHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9IGFzIE1vZHVsZTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVNb2R1bGUobW9kdWxlSWQ6IHN0cmluZywgZW5hYmxlZDogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBtb2R1bGVSZWYgPSBkb2MobW9kdWxlc0NvbGxlY3Rpb24sIG1vZHVsZUlkKTtcbiAgYXdhaXQgdXBkYXRlRG9jKG1vZHVsZVJlZiwge1xuICAgIGVuYWJsZWQsXG4gICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZU1vZHVsZXMobW9kdWxlczogT21pdDxNb2R1bGUsICd1cGRhdGVkQXQnPltdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gIFxuICBmb3IgKGNvbnN0IG1vZHVsZSBvZiBtb2R1bGVzKSB7XG4gICAgY29uc3QgbW9kdWxlUmVmID0gZG9jKG1vZHVsZXNDb2xsZWN0aW9uLCBtb2R1bGUuaWQpO1xuICAgIGNvbnN0IG1vZHVsZVNuYXAgPSBhd2FpdCBnZXREb2MobW9kdWxlUmVmKTtcbiAgICBcbiAgICBpZiAoIW1vZHVsZVNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIGJhdGNoLnNldChtb2R1bGVSZWYsIHtcbiAgICAgICAgLi4ubW9kdWxlLFxuICAgICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IG1vZHVsZXMgaWYgdGhleSBkb24ndCBleGlzdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldHVwRGVmYXVsdE1vZHVsZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGRlZmF1bHRNb2R1bGVzOiBPbWl0PE1vZHVsZSwgJ3VwZGF0ZWRBdCc+W10gPSBbXG4gICAgeyBpZDogJ21vY2stcGF0aWVudCcsIG5hbWU6ICdNb2NrIFBhdGllbnQgRGF0YScsIGRlc2NyaXB0aW9uOiAnR2VuZXJhdGUgbW9jayBwYXRpZW50IGRhdGEgZm9yIHRlc3RpbmcnLCBlbmFibGVkOiB0cnVlIH0sXG4gICAgeyBpZDogJ3NwZWN0cmEtcG9vbCcsIG5hbWU6ICdTcGVjdHJhIFBvb2wgTWFuYWdlbWVudCcsIGRlc2NyaXB0aW9uOiAnTWFuYWdlIHNwZWN0cmEgcG9vbCBhc3NpZ25tZW50cycsIGVuYWJsZWQ6IGZhbHNlIH0sXG4gICAgeyBpZDogJ2FjdWl0eS10cmFja2luZycsIG5hbWU6ICdBY3VpdHkgVHJhY2tpbmcnLCBkZXNjcmlwdGlvbjogJ1RyYWNrIGFuZCBtYW5hZ2UgcGF0aWVudCBhY3VpdHkgbGV2ZWxzJywgZW5hYmxlZDogdHJ1ZSB9LFxuICAgIHsgaWQ6ICdiZWQtbWFuYWdlbWVudCcsIG5hbWU6ICdCZWQgTWFuYWdlbWVudCcsIGRlc2NyaXB0aW9uOiAnVHJhY2sgYmVkIGF2YWlsYWJpbGl0eSBhbmQgYXNzaWdubWVudHMnLCBlbmFibGVkOiB0cnVlIH0sXG4gICAgeyBpZDogJ3N0YWZmLW1lc3NhZ2luZycsIG5hbWU6ICdTdGFmZiBNZXNzYWdpbmcnLCBkZXNjcmlwdGlvbjogJ0ludGVybmFsIG1lc3NhZ2luZyBzeXN0ZW0gZm9yIHN0YWZmJywgZW5hYmxlZDogZmFsc2UgfVxuICBdO1xuICBcbiAgYXdhaXQgaW5pdGlhbGl6ZU1vZHVsZXMoZGVmYXVsdE1vZHVsZXMpO1xufVxuXG4vLyBPcHRpbWl6ZWQgZnVuY3Rpb24gdG8gbG9hZCBhbGwgdW5pdCBkYXRhIGF0IG9uY2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkVW5pdERhdGEodW5pdElkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgdW5pdDogVW5pdCB8IG51bGwsXG4gIHBhdGllbnRzOiBQYXRpZW50W10sXG4gIG51cnNlczogTnVyc2VbXSxcbiAgcGN0czogUENUW10sXG4gIGNoYXJnZU51cnNlOiBTdGFmZk1lbWJlciB8IG51bGwsXG4gIHVuaXRDbGVyazogU3RhZmZNZW1iZXIgfCBudWxsXG59PiB7XG4gIGlmICghdW5pdElkKSB7XG4gICAgcmV0dXJuIHsgdW5pdDogbnVsbCwgcGF0aWVudHM6IFtdLCBudXJzZXM6IFtdLCBwY3RzOiBbXSwgY2hhcmdlTnVyc2U6IG51bGwsIHVuaXRDbGVyazogbnVsbCB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVkID0gdW5pdERhdGFDYWNoZS5nZXQodW5pdElkKTtcbiAgaWYgKGNhY2hlZD8udW5pdCAmJiBjYWNoZWQucGF0aWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICBcbiAgLy8gRmV0Y2ggdGhlIHVuaXQgZmlyc3QsIGFzIHdlIG5lZWQgaXQgZm9yIGNvbnRleHQuXG4gIGNvbnN0IHVuaXQgPSBhd2FpdCBnZXRVbml0KHVuaXRJZCk7XG5cbiAgLy8gSWYgbm8gdW5pdCwgdGhlcmUncyBub3RoaW5nIHRvIGxvYWQuXG4gIGlmICghdW5pdCkge1xuICAgIHJldHVybiB7IHVuaXQ6IG51bGwsIHBhdGllbnRzOiBbXSwgbnVyc2VzOiBbXSwgcGN0czogW10sIGNoYXJnZU51cnNlOiBudWxsLCB1bml0Q2xlcms6IG51bGwgfTtcbiAgfVxuXG4gIC8vIE5vdywgZmV0Y2ggYWxsIHJlbGF0ZWQgZGF0YSBpbiBwYXJhbGxlbC5cbiAgY29uc3QgW3BhdGllbnRzLCBudXJzZXMsIHBjdHMsIGNoYXJnZU51cnNlLCB1bml0Q2xlcmtdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgZ2V0UGF0aWVudHNCeVVuaXQodW5pdElkKSxcbiAgICAgIGdldE51cnNlc0J5VW5pdCh1bml0SWQpLFxuICAgICAgZ2V0UENUc0J5VW5pdCh1bml0SWQpLFxuICAgICAgZ2V0U3RhZmZCeVVuaXRBbmRSb2xlKHVuaXRJZCwgJ2NoYXJnZU51cnNlJyksXG4gICAgICBnZXRTdGFmZkJ5VW5pdEFuZFJvbGUodW5pdElkLCAndW5pdENsZXJrJylcbiAgXSk7XG4gIFxuICBjb25zdCBkYXRhID0geyB1bml0LCBwYXRpZW50cywgbnVyc2VzLCBwY3RzLCBjaGFyZ2VOdXJzZSwgdW5pdENsZXJrIH07XG4gIFxuICAvLyBTdG9yZSB0aGUgZnVsbHkgbG9hZGVkIGRhdGEgaW4gdGhlIGNhY2hlLlxuICB1bml0RGF0YUNhY2hlLnNldCh1bml0SWQsIGRhdGEpO1xuXG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVVuaXREYXRhKHVuaXQ6IFVuaXQpOiBQcm9taXNlPHtcbiAgcGF0aWVudHM6IFBhdGllbnRbXSxcbiAgbnVyc2VzOiBOdXJzZVtdLFxuICBwY3RzOiBQQ1RbXSxcbiAgY2hhcmdlTnVyc2U6IFN0YWZmTWVtYmVyIHwgbnVsbCxcbiAgdW5pdENsZXJrOiBTdGFmZk1lbWJlciB8IG51bGxcbn0+IHtcbiAgLy8gR2VuZXJhdGUgYWxsIHRoZSBkYXRhIGZpcnN0XG4gIGNvbnN0IHBhdGllbnRzRGF0YTogT21pdDxQYXRpZW50LCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSA9IFtdO1xuICBjb25zdCBudXJzZXNEYXRhOiBPbWl0PE51cnNlLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSA9IFtdO1xuICBjb25zdCBwY3RzRGF0YTogT21pdDxQQ1QsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPltdID0gW107XG4gIGNvbnN0IHN0YWZmRGF0YTogT21pdDxTdGFmZk1lbWJlciwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+W10gPSBbXTtcbiAgXG4gIC8vIEdlbmVyYXRlIHBhdGllbnQgZGF0YVxuICBmb3IgKGNvbnN0IHJhbmdlIG9mIHVuaXQucm9vbVJhbmdlcykge1xuICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHJhbmdlLnNwbGl0KCctJykubWFwKG51bSA9PiBwYXJzZUludChudW0sIDEwKSk7XG4gICAgZm9yIChsZXQgcm9vbU51bSA9IHN0YXJ0OyByb29tTnVtIDw9IGVuZDsgcm9vbU51bSsrKSB7XG4gICAgICBwYXRpZW50c0RhdGEucHVzaCh7XG4gICAgICAgIHVuaXRJZDogdW5pdC5pZCxcbiAgICAgICAgcm9vbU51bWJlcjogcm9vbU51bS50b1N0cmluZygpLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgYWN1aXR5OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDEsIC8vIFJhbmRvbSBhY3VpdHkgMS01XG4gICAgICAgIGFzc2lnbmVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBHZW5lcmF0ZSBudXJzZSBkYXRhXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdW5pdC5udXJzZUNhcmRDb3VudDsgaSsrKSB7XG4gICAgbnVyc2VzRGF0YS5wdXNoKHtcbiAgICAgIHVuaXRJZDogdW5pdC5pZCxcbiAgICAgIG5hbWU6IGBOdXJzZSAke2kgKyAxfWAsXG4gICAgICBzcGVjdHJhTnVtYmVyOiBgU04kezEwMDAwICsgaX1gLFxuICAgICAgcmVsaWVmTmFtZTogJycsXG4gICAgICBhc3NpZ25lZFJvb21zOiBbXSxcbiAgICAgIGFjdWl0eUNhcGFjaXR5OiAxMlxuICAgIH0pO1xuICB9XG4gIFxuICAvLyBHZW5lcmF0ZSBQQ1QgZGF0YVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaXQucGN0Q2FyZENvdW50OyBpKyspIHtcbiAgICAvLyBEaXZpZGUgcm9vbSByYW5nZXMgYW1vbmcgUENUc1xuICAgIGNvbnN0IHJhbmdlSW5kZXggPSBpICUgdW5pdC5yb29tUmFuZ2VzLmxlbmd0aDtcbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB1bml0LnJvb21SYW5nZXNbcmFuZ2VJbmRleF0uc3BsaXQoJy0nKS5tYXAobnVtID0+IHBhcnNlSW50KG51bSwgMTApKTtcbiAgICBjb25zdCByYW5nZVNpemUgPSBlbmQgLSBzdGFydCArIDE7XG4gICAgY29uc3QgcGN0UmFuZ2VTaXplID0gTWF0aC5jZWlsKHJhbmdlU2l6ZSAvIHVuaXQucGN0Q2FyZENvdW50KTtcbiAgICBcbiAgICBjb25zdCBwY3RTdGFydCA9IHN0YXJ0ICsgKGkgKiBwY3RSYW5nZVNpemUpO1xuICAgIGNvbnN0IHBjdEVuZCA9IE1hdGgubWluKHBjdFN0YXJ0ICsgcGN0UmFuZ2VTaXplIC0gMSwgZW5kKTtcbiAgICBcbiAgICBwY3RzRGF0YS5wdXNoKHtcbiAgICAgIHVuaXRJZDogdW5pdC5pZCxcbiAgICAgIG5hbWU6IGBQQ1QgJHtpICsgMX1gLFxuICAgICAgc3BlY3RyYU51bWJlcjogYFBDVCR7MTAwMDAgKyBpfWAsXG4gICAgICByZWxpZWZOYW1lOiAnJyxcbiAgICAgIHJvb21SYW5nZTogYCR7cGN0U3RhcnR9LSR7cGN0RW5kfWBcbiAgICB9KTtcbiAgfVxuICBcbiAgLy8gR2VuZXJhdGUgc3RhZmYgZGF0YVxuICBpZiAodW5pdC5oYXNDaGFyZ2VOdXJzZSkge1xuICAgIHN0YWZmRGF0YS5wdXNoKHtcbiAgICAgIHVuaXRJZDogdW5pdC5pZCxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc3BlY3RyYU51bWJlcjogJycsXG4gICAgICByb2xlOiAnY2hhcmdlTnVyc2UnXG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmICh1bml0Lmhhc1VuaXRDbGVyaykge1xuICAgIHN0YWZmRGF0YS5wdXNoKHtcbiAgICAgIHVuaXRJZDogdW5pdC5pZCxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc3BlY3RyYU51bWJlcjogJycsXG4gICAgICByb2xlOiAndW5pdENsZXJrJ1xuICAgIH0pO1xuICB9XG4gIFxuXG4gIGNvbnN0IFtwYXRpZW50cywgbnVyc2VzLCBwY3RzLCBzdGFmZk1lbWJlcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGJhdGNoQ3JlYXRlUGF0aWVudHMocGF0aWVudHNEYXRhKSxcbiAgICBiYXRjaENyZWF0ZU51cnNlcyhudXJzZXNEYXRhKSxcbiAgICBiYXRjaENyZWF0ZVBDVHMocGN0c0RhdGEpLFxuICAgIGJhdGNoQ3JlYXRlU3RhZmZNZW1iZXJzKHN0YWZmRGF0YSlcbiAgXSk7XG4gIFxuICAvLyBQcm9jZXNzIHN0YWZmIG1lbWJlcnNcbiAgbGV0IGNoYXJnZU51cnNlOiBTdGFmZk1lbWJlciB8IG51bGwgPSBudWxsO1xuICBsZXQgdW5pdENsZXJrOiBTdGFmZk1lbWJlciB8IG51bGwgPSBudWxsO1xuICBcbiAgZm9yIChjb25zdCBzdGFmZiBvZiBzdGFmZk1lbWJlcnMpIHtcbiAgICBpZiAoc3RhZmYucm9sZSA9PT0gJ2NoYXJnZU51cnNlJykge1xuICAgICAgY2hhcmdlTnVyc2UgPSBzdGFmZjtcbiAgICB9IGVsc2UgaWYgKHN0YWZmLnJvbGUgPT09ICd1bml0Q2xlcmsnKSB7XG4gICAgICB1bml0Q2xlcmsgPSBzdGFmZjtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgcGF0aWVudHMsXG4gICAgbnVyc2VzLFxuICAgIHBjdHMsXG4gICAgY2hhcmdlTnVyc2UsXG4gICAgdW5pdENsZXJrXG4gIH07XG59XG5leHBvcnQgeyBhcHAsIGRiLCBzdG9yYWdlLCBhdXRoIH07XG4iXSwibmFtZXMiOlsiYXBwIiwiZGIiLCJzdG9yYWdlIiwiYXV0aCIsImNvbGxlY3Rpb24iLCJkb2MiLCJzZXREb2MiLCJnZXREb2MiLCJnZXREb2NzIiwidXBkYXRlRG9jIiwiZGVsZXRlRG9jIiwicXVlcnkiLCJ3aGVyZSIsIndyaXRlQmF0Y2giLCJmYWNpbGl0aWVzQ29sbGVjdGlvbiIsInVuaXRzQ29sbGVjdGlvbiIsInBhdGllbnRzQ29sbGVjdGlvbiIsIm51cnNlc0NvbGxlY3Rpb24iLCJwY3RzQ29sbGVjdGlvbiIsInN0YWZmQ29sbGVjdGlvbiIsIm1vZHVsZXNDb2xsZWN0aW9uIiwiZmFjaWxpdGllc0NhY2hlIiwidW5pdHNDYWNoZSIsIk1hcCIsInVuaXREYXRhQ2FjaGUiLCJjcmVhdGVGYWNpbGl0eSIsImZhY2lsaXR5RGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJmYWNpbGl0eVJlZiIsIm5ld0ZhY2lsaXR5IiwiaWQiLCJjcmVhdGVkQXQiLCJwdXNoIiwiZ2V0RmFjaWxpdGllcyIsInNuYXBzaG90IiwiZmFjaWxpdGllcyIsImRvY3MiLCJtYXAiLCJkYXRhIiwiY3JlYXRlVW5pdCIsInVuaXREYXRhIiwidW5pdFJlZiIsIm5ld1VuaXQiLCJ1cGRhdGVkQXQiLCJmYWNpbGl0eVVuaXRzIiwiZ2V0IiwiZmFjaWxpdHlJZCIsInNldCIsImdldFVuaXRzIiwiaGFzIiwicSIsInVuaXRzIiwiZ2V0VW5pdCIsInVuaXRJZCIsInZhbHVlcyIsImZvdW5kIiwiZmluZCIsInUiLCJ1bml0U25hcCIsImV4aXN0cyIsInVuaXQiLCJ1cGRhdGVVbml0IiwidXBkYXRlRGF0YSIsImZvckVhY2giLCJpbmRleCIsImZpbmRJbmRleCIsInVwZGF0ZWRVbml0cyIsImRlbGV0ZVVuaXQiLCJkZWxldGVVbml0UGF0aWVudHMiLCJkZWxldGVVbml0TnVyc2VzIiwiZGVsZXRlVW5pdFBDVHMiLCJkZWxldGVVbml0U3RhZmYiLCJmaWx0ZXIiLCJkZWxldGUiLCJjcmVhdGVQYXRpZW50IiwicGF0aWVudERhdGEiLCJwYXRpZW50UmVmIiwibmV3UGF0aWVudCIsInBhdGllbnRzIiwiYmF0Y2hDcmVhdGVQYXRpZW50cyIsInBhdGllbnRzRGF0YSIsImxlbmd0aCIsImJhdGNoIiwibmV3UGF0aWVudHMiLCJjb21taXQiLCJnZXRQYXRpZW50c0J5VW5pdCIsImNhY2hlZERhdGEiLCJudXJzZXMiLCJwY3RzIiwiY2hhcmdlTnVyc2UiLCJ1bml0Q2xlcmsiLCJ1cGRhdGVQYXRpZW50IiwicGF0aWVudElkIiwiZW50cmllcyIsInAiLCJiYXRjaFVwZGF0ZVBhdGllbnRzIiwidXBkYXRlcyIsInVwZGF0ZSIsImRlbGV0ZVBhdGllbnQiLCJlbXB0eSIsInJlZiIsImNyZWF0ZU51cnNlIiwibnVyc2VEYXRhIiwibnVyc2VSZWYiLCJuZXdOdXJzZSIsImJhdGNoQ3JlYXRlTnVyc2VzIiwibnVyc2VzRGF0YSIsIm5ld051cnNlcyIsImdldE51cnNlc0J5VW5pdCIsInVwZGF0ZU51cnNlIiwibnVyc2VJZCIsIm4iLCJkZWxldGVOdXJzZSIsImNyZWF0ZVBDVCIsInBjdERhdGEiLCJwY3RSZWYiLCJuZXdQQ1QiLCJiYXRjaENyZWF0ZVBDVHMiLCJwY3RzRGF0YSIsIm5ld1BDVHMiLCJnZXRQQ1RzQnlVbml0IiwidXBkYXRlUENUIiwicGN0SWQiLCJkZWxldGVQQ1QiLCJjcmVhdGVTdGFmZk1lbWJlciIsInN0YWZmRGF0YSIsInN0YWZmUmVmIiwibmV3U3RhZmYiLCJyb2xlIiwiYmF0Y2hDcmVhdGVTdGFmZk1lbWJlcnMiLCJuZXdTdGFmZk1lbWJlcnMiLCJzdGFmZk1lbWJlckRhdGEiLCJnZXRTdGFmZkJ5VW5pdCIsImdldFN0YWZmQnlVbml0QW5kUm9sZSIsInN0YWZmTWVtYmVyIiwidXBkYXRlU3RhZmZNZW1iZXIiLCJzdGFmZklkIiwiZGVsZXRlU3RhZmZNZW1iZXIiLCJnZXRNb2R1bGVzIiwidXBkYXRlTW9kdWxlIiwibW9kdWxlSWQiLCJlbmFibGVkIiwibW9kdWxlUmVmIiwiaW5pdGlhbGl6ZU1vZHVsZXMiLCJtb2R1bGVzIiwibW9kdWxlIiwibW9kdWxlU25hcCIsInNldHVwRGVmYXVsdE1vZHVsZXMiLCJkZWZhdWx0TW9kdWxlcyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImxvYWRVbml0RGF0YSIsImNhY2hlZCIsIlByb21pc2UiLCJhbGwiLCJpbml0aWFsaXplVW5pdERhdGEiLCJyYW5nZSIsInJvb21SYW5nZXMiLCJzdGFydCIsImVuZCIsInNwbGl0IiwibnVtIiwicGFyc2VJbnQiLCJyb29tTnVtIiwicm9vbU51bWJlciIsInRvU3RyaW5nIiwiYWN1aXR5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYXNzaWduZWQiLCJpIiwibnVyc2VDYXJkQ291bnQiLCJzcGVjdHJhTnVtYmVyIiwicmVsaWVmTmFtZSIsImFzc2lnbmVkUm9vbXMiLCJhY3VpdHlDYXBhY2l0eSIsInBjdENhcmRDb3VudCIsInJhbmdlSW5kZXgiLCJyYW5nZVNpemUiLCJwY3RSYW5nZVNpemUiLCJjZWlsIiwicGN0U3RhcnQiLCJwY3RFbmQiLCJtaW4iLCJyb29tUmFuZ2UiLCJoYXNDaGFyZ2VOdXJzZSIsImhhc1VuaXRDbGVyayIsInN0YWZmTWVtYmVycyIsInN0YWZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/firebase.ts\n"));

/***/ })

});